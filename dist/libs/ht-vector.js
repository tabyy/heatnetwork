!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e.ht=e.ht||{},e.ht.vector=t())}(this,function(){"use strict";var ue={HOVER:"ht.hover",ACTIVE:"ht.active",PRESSED:"ht.pressed",DISABLED:"ht.disabled",FOCUS:"ht.focus",FONT_SIZE:"ht.fontSize",FONT_FAMILY:"ht.fontFamily",FONT:"ht.font",VALUE:"ht.value",PLACEHOLDER:"ht.placeholder",TEXT_COLOR:"ht.textColor",PADDING:"ht.padding",EDITING:"ht.editing",TEXT_ALIGN:"ht.textAlign",LINE_HEIGHT:"ht.lineHeight",WORD_BREAK:"ht.wordBreak",CHECKED:"ht.checked",LABEL:"ht.label",ICON:"ht.icon",FORM_ITEM_NAME:"ht.name",FORM_ITEM_GROUP:"ht.group",ON_CLICK:"ht.onClick",ON_CHANGE:"ht.onChange",ON_KEYDOWN:"ht.onKeyDown",ON_KEYUP:"ht.onKeyUp",ON_SELECT_ROW:"ht.onSelectRow",ON_HOVER_CELL:"ht.onHoverCell",DROP_DOWN:"ht.dropDown",FORMAT:"ht.format",SHOW_TIME:"ht.showTime",DATE_TYPE:"ht.dateType",DATA_SOURCE:"ht.dataSource",DROP_ICON_WIDTH:"ht.dropIconWidth",DROP_ICON_HEIGHT:"ht.dropIconHeight",DROP_ROW_HEIGHT:"ht.dropRowHeight",DROP_WIDTH:"ht.dropWidth",DROP_BACKGROUND:"ht.dropBackground",DROP_HOVER_BACKGROUND:"ht.dropHoverBackground",DROP_LABEL_FONT:"ht.dropLabelFont",DROP_LABEL_COLOR:"ht.dropLabelColor",DROP_ACTIVE_LABEL_COLOR:"ht.dropActiveLabelColor",DROP_ACTIVE_BACKGOUND:"ht.dropActiveBackground",DROP_MAX_HEIGHT:"ht.dropMaxHeight",INPUT_TYPE:"ht.inputType",MAX_LENGTH:"ht.maxLength",HOVER_INDEX:"ht.hoverIndex",DATASOURCE:"ht.dataSource",ROW_HEIGHT:"ht.rowHeight",HEAD_HEIGHT:"ht.headHeight",TRANSLATE_X:"ht.translateX",TRANSLATE_Y:"ht.translateY",SHOW_HEAD:"ht.showHead",SELECT_INDEX:"ht.selectedIndex",SCROLL_BAR_VISIBLE:"ht.scrollBarVisible",AUTO_HIDE_SCROLL_BAR:"ht.autoHideScrollBar",COLUMNS:"ht.columns",MAX:"ht.max",MIN:"ht.min",STEP:"ht.step",SHOW_TOOLTIP:"ht.showToolTip",TOOLTIP_FORMAT:"ht.toolTipFormat",VALUE_BAR_DRAGGABLE:"ht.valueBarDraggable"},ne="top",le="bottom",he="right",se="left",de="center",i="multiple",n="single",y="radio",b="checkbox",l=(function(){function h(e){this.value=e}function e(r){var i,n;function l(e,t){try{var a=r[e](t),o=a.value;o instanceof h?Promise.resolve(o.value).then(function(e){l("next",e)},function(e){l("throw",e)}):u(a.done?"return":"normal",a.value)}catch(e){u("throw",e)}}function u(e,t){switch(e){case"return":i.resolve({value:t,done:!0});break;case"throw":i.reject(t);break;default:i.resolve({value:t,done:!1})}(i=i.next)?l(i.key,i.arg):n=null}this._invoke=function(o,r){return new Promise(function(e,t){var a={key:o,arg:r,resolve:e,reject:t,next:null};n?n=n.next=a:(i=n=a,l(o,r))})},"function"!=typeof r.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(e){return this._invoke("next",e)},e.prototype.throw=function(e){return this._invoke("throw",e)},e.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),a=function(){function o(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e}}(),O=function e(t,a,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,o)}if("value"in r)return r.value;var n=r.get;return void 0!==n?n.call(o):void 0},u=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},re=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],o=!0,r=!1,i=void 0;try{for(var n,l=e[Symbol.iterator]();!(o=(n=l.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},ge=function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)},e=ht.Default,j=e.drawText,z=e.drawStretchImage,K=e.getImage,Z=[2,8],ie={placeholderColor:"#737373",fontSize:12,fontFamily:"arial,  sans-serif",emptyColor:"rgba(0,0,0,0)",hoverDarker:5,activeDarker:11},t=ht.Default,$=t.drawText,q=t.drawStretchImage,J=t.getImage,Q=ht.Default.drawText,s=/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/,d=/^[rR][gG][Bb][\(]((2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?),){2}((2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?))\)$/,g=/^[rR][gG][Bb][Aa][\(]((2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?),){3}(0\.\d{1,22}|1|0)?[\)]{1}$/,c=function(){function r(e,t,a,o){l(this,r),this.r=null,this.g=null,this.b=null,this.a=null,e&&this.setColor(e,t,a,o)}return a(r,[{key:"setColor",value:function(e,t,a,o){if(e&&!t)if(e=e.replace(/\s+/g,""),s.test(e))4===e.length?(this.r=parseInt(e[1]+e[1],16),this.g=parseInt(e[2]+e[3],16),this.b=parseInt(e[3]+e[3],16)):7===e.length&&(this.r=parseInt(e.substring(1,3),16),this.g=parseInt(e.substring(3,5),16),this.b=parseInt(e.substring(5,7),16));else if(d.test(e)){var r=(e=e.replace(/[rRgGbB\(\)\s]*/g,"")).split(",");this.r=parseInt(r[0]),this.g=parseInt(r[1]),this.b=parseInt(r[2])}else if(g.test(e)){var i=(e=e.replace(/[rRgGbBaA\(\)\s]*/g,"")).split(",");this.r=parseInt(i[0]),this.g=parseInt(i[1]),this.b=parseInt(i[2]),this.a=parseFloat(i[3])}}},{key:"toString",value:function(){return 1!==this.a&&null!==this.a?this.getRGBA():this.getWebColor()}},{key:"getRGB",value:function(){var e=this.r,t=this.g,a=this.b;return null!==e&&null!==t&&null!==a?"rgb("+e+", "+t+", "+a+")":null}},{key:"getRGBA",value:function(){var e=this.r,t=this.g,a=this.b,o=this.a;return null!==e&&null!==t&&null!==a?"rgba("+e+", "+t+", "+a+", "+(null===o?1:o.toFixed(2))+")":null}},{key:"getWebColor",value:function(){var e=this.r,t=this.g,a=this.b;return null!==e&&null!==t&&null!==a?"#"+this._getWebValue(e)+this._getWebValue(t)+this._getWebValue(a):null}},{key:"_getWebValue",value:function(e){var t=e.toString(16);return 1===t.length&&(t="0"+t),t}}]),r}(),o=ht.Default,W=o.drawText,G=o.drawStretchImage,U=o.getImage,X="#ffffff",F="#cccccc",Y=new c,r=ht.Default,ce=r.drawText,fe=r.drawStretchImage,ve=r.getImage,ee=function(e,t){return e<=1?t*e:e},te=void 0,ae=void 0,oe=void 0,pe=void 0,_e=void 0,ye=void 0,De=function(e,t){return t?(e-ye)/te*ae+oe:pe-(e-ye)/te*ae},Ve=ht.Default.drawText,be=function(e,t){return e<1?t*e:e},we=ht.Default.drawRoundRect,me=4;var f=ht.Default,Ee=f.drawText,Te=f.drawStretchImage,ke=f.getImage,Ce=f.drawBorder,Ie=/\n/g;var S=ht.Default.drawText,v=ht.Default,M=v.drawRoundRect,Oe=v.drawImage,xe=function(e,t,a,o){var r=t.x,i=t.y,n=t.width,l=t.height;e.fillStyle=a,e.beginPath(),M(e,r,i,n,l,o),e.closePath(),e.fill()},p=function(e,t,a,o,r){var i=a.getValue("min"),n=a.getValue("max"),l=a.getValue("value"),u=a.getValue("sliderImage"),h=a.getValue("sliderBorderWidth"),s=a.getValue("sliderBorderRadius"),d=a.getValue("sliderBorderColor"),g=a.getValue("sliderBackground"),c=a.getValue("sliderWidth"),f=a.getValue("sliderHeight"),v=a.getValue("sliderOffsetX"),p=a.getValue("sliderOffsetY"),_=a.getValue("barBackground"),y=a.getValue("barValueBackground"),D=a.getValue("barGradient"),V=a.getValue("barGradientColor"),b=a.getValue("barWidth"),w=a.getValue("barBorderRadius"),m=a.getValue("padding"),E=a.getValue("disabled"),T=a.getValue("disabledLayerColor");l=Math.min(n,Math.max(i,l));var k=t.x,C=t.y,I=t.width,O=t.height,x=Math.abs(n-i),A={x:k+m,y:C+(O-b)/2,width:I-2*m,height:b};w<1&&(w*=b),xe(e,A,_,w);var L=ht.Default.clone(A);L.width*=(l-i)/x,D&&(y=ht.Default.createGradient(e,D,y,V,A.x,A.y,A.width,A.height)),xe(e,L,y,w);var R=L.x+L.width-c/2+v,P=L.y+(b-f)/2+p;u?Oe(e,ht.Default.getImage(u),R,P,c,f):(s<1&&(s*=Math.min(c,f)),e.beginPath(),M(e,R,P,c,f,s),e.closePath(),e.fillStyle=g,e.fill(),h&&(e.lineWidth=h,e.strokeStyle=d,e.stroke())),o&&(o.__barRect=A,o.__sliderRect={x:R,y:P,width:c,height:f}),E&&(e.fillStyle=T,e.fillRect(k,C,I,O))},_=function(e,t,a,o,r){var i=a.getValue("min"),n=a.getValue("max"),l=a.getValue("value"),u=a.getValue("sliderImage"),h=a.getValue("sliderBorderWidth"),s=a.getValue("sliderBorderRadius"),d=a.getValue("sliderBorderColor"),g=a.getValue("sliderBackground"),c=a.getValue("sliderWidth"),f=a.getValue("sliderHeight"),v=a.getValue("sliderOffsetX"),p=a.getValue("sliderOffsetY"),_=a.getValue("barBackground"),y=a.getValue("barValueBackground"),D=a.getValue("barGradient"),V=a.getValue("barGradientColor"),b=a.getValue("barWidth"),w=a.getValue("barBorderRadius"),m=a.getValue("padding"),E=a.getValue("disabled"),T=a.getValue("disabledLayerColor"),k=t.x,C=t.y,I=t.width,O=t.height,x=re(l,2),A=x[0],L=x[1];A=Math.max(i,A),L=Math.min(n,L);var R=Math.abs(n-i),P={x:k+m,y:C+(O-b)/2,width:I-2*m,height:b};w<1&&(w*=b),xe(e,P,_,w);var S=ht.Default.clone(P);S.width*=(L-A)/R,S.x+=(A-i)/R*P.width,D&&(y=ht.Default.createGradient(e,D,y,V,P.x,P.y,P.width,P.height)),xe(e,S,y,w);var B=S.x-c/2+v,H=S.x+S.width-c/2+v,N=S.y+(b-f)/2+p;u?(Oe(e,ht.Default.getImage(u),B,N,c,f),Oe(e,ht.Default.getImage(u),H,N,c,f)):(s<1&&(s*=Math.min(c,f)),e.beginPath(),M(e,B,N,c,f,s),e.closePath(),e.fillStyle=g,e.fill(),h&&(e.lineWidth=h,e.strokeStyle=d,e.stroke()),e.beginPath(),M(e,H,N,c,f,s),e.closePath(),e.fillStyle=g,e.fill(),h&&(e.lineWidth=h,e.strokeStyle=d,e.stroke())),o&&(o.__barRect=P,o.__valueBarRect=S,o.__sliderRect={x:B,y:N,width:c,height:f},o.__sliderRect2={x:H,y:N,width:c,height:f}),E&&(e.fillStyle=T,e.fillRect(k,C,I,O))},D=ht.Default.drawImage,V=function(){function e(){l(this,e)}return a(e,[{key:"onDown",value:function(e,t,a,o,r,i){}},{key:"onUp",value:function(e,t,a,o,r,i){}},{key:"onMove",value:function(e,t,a,o,r,i){}},{key:"onEnter",value:function(e,t,a,o,r,i){}},{key:"onHover",value:function(e,t,a,o,r,i){}},{key:"onLeave",value:function(e,t,a,o,r,i){}},{key:"onBeginDrag",value:function(e,t,a,o,r,i){}},{key:"onDrag",value:function(e,t,a,o,r,i){}},{key:"onEndDrag",value:function(e,t,a,o,r,i){}},{key:"onScroll",value:function(e,t,a,o,r,i){}}]),e}(),w=function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,V),a(t,[{key:"onEnter",value:function(e,t,a,o,r,i){vt(a,t).interactiveInfo.defaultCursor=a.getView().style.cursor,t.a(ue.DISABLED)?a.setCursor("not-allowed"):a.setCursor("text")}},{key:"onLeave",value:function(e,t,a,o,r,i){var n=vt(a,t);a.setCursor(n.interactiveInfo.defaultCursor||"default")}},{key:"onDown",value:function(e,a,o,t,r,i){if(!a.a(ue.DISABLED)&&!a.a(ue.EDITING)){var n=a.a(ue.FONT),l=Qe("textarea"),u=a.a(ue.TEXT_COLOR),h=l.style,s=a.a(ue.VALUE),d=a.a(ue.PLACEHOLDER),g=a.a(ue.LINE_HEIGHT),c=a.a(ue.TEXT_ALIGN),f=a.a(ue.WORD_BREAK),v=a.a(ue.MAX_LENGTH),p=a.a(ue.ON_KEYDOWN),_=a.a(ue.ON_KEYUP),y=a.a(ue.ON_CHANGE),D=qe(a.a(ue.PADDING)),V=re(D,4),b=V[0],w=V[1],m=V[2],E=V[3];h.color=u,h.font=n,h.paddingTop=b+"px",h.paddingRight=w+"px",h.paddingBottom=m+"px",h.paddingLeft=2+E+"px",h.textAlign=c,h.resize="none",h.overflow="hidden",h.lineHeight=g+"px",h.wordBreak=f?"break-all":"keep-word",l.value=s||"",l.placeholder=d||"",v&&l.setAttribute("maxlength",v),o.appendHTML(l);var T=pt(o,a,this);T&&et(o,l,T),a.a(ue.EDITING,!0);var k=function(e){et(o,l,T)},C=function e(t){o.getDataAt(t)!==a&&(t.preventDefault(),a.a(ue.VALUE,l.value),o.getView().removeChild(l),a.a(ue.EDITING,!1),o.ump(k),o.getView().removeEventListener("mousedown",e),o.getView().removeEventListener("touchstart",e))};setTimeout(function(){l.focus(),o.mp(k),p&&l.addEventListener("keydown",function(e){p(e,a)}),(_||y)&&l.addEventListener("keyup",function(e){_&&p(e,a),y&&_(l.value,a)}),o.getView().addEventListener("mousedown",C),o.getView().addEventListener("touchstart",C)},1)}}},{key:"onDrag",value:function(e,t,a,o,r,i){}}]),t}(),m=function(e){function I(){return l(this,I),h(this,(I.__proto__||Object.getPrototypeOf(I)).call(this))}return u(I,V),a(I,[{key:"onEnter",value:function(e,t,a,o,r,i){t.__defaultCursor=a.getView().style.cursor,t.a(ue.DISABLED)?a.setCursor("not-allowed"):a.setCursor("text")}},{key:"onLeave",value:function(e,t,a,o,r,i){a.setCursor(t.__defaultCursor||"default")}},{key:"onDown",value:function(e,a,o,t,r,i){if(O(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"onDown",this).call(this),!a.a(ue.DISABLED)&&!a.a(ue.EDITING)){var n=a.getAnchorRect(),l=a.a(ue.FONT),u=Qe(),h=a.a(ue.TEXT_COLOR)||ie.textColor,s=u.style,d=a.a(ue.VALUE),g=a.a(ue.PLACEHOLDER),c=a.a(ue.TEXT_ALIGN),f=a.a(ue.MAX_LENGTH),v=a.a(ue.INPUT_TYPE),p=a.a(ue.ON_KEYDOWN),_=a.a(ue.ON_KEYUP),y=a.a(ue.ON_CHANGE),D=qe(a.a(ue.PADDING)),V=re(D,4),b=V[0],w=V[1],m=V[2],E=V[3];v&&(u.type=v),s.color=h,s.font=l,s.paddingTop=b+"px",s.paddingRight=w+"px",s.paddingBottom=m+"px",s.paddingLeft=2+E+"px",s.lineHeight=n.height+"px",s.textAlign=c,u.value=d||"",u.placeholder=g||"",u.spellcheck=!1,f&&u.setAttribute("maxlength",f),o.appendHTML(u);var T=pt(o,a,this);T&&et(o,u,T),a.a(ue.EDITING,!0);var k=function(e){et(o,u,T)},C=function e(t){o.getDataAt(t)!==a&&(t.preventDefault(),a.a(ue.VALUE,u.value),o.getView().removeChild(u),a.a(ue.EDITING,!1),o.ump(k),o.getView().removeEventListener("mousedown",e),o.getView().removeEventListener("touchstart",e))};setTimeout(function(){u.focus(),o.mp(k),p&&u.addEventListener("keydown",function(e){p(e,a)}),(_||y)&&u.addEventListener("keyup",function(e){_&&_(e,a),y&&y(u.value,a)}),o.getView().addEventListener("mousedown",C),o.getView().addEventListener("touchstart",C)},1)}}},{key:"onDrag",value:function(e,t,a,o,r,i){}}]),I}(),E=function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,V),a(t,[{key:"onDown",value:function(e,t,a,o,r,i){t.a(ue.DISABLED)||t.a(ue.PRESSED,!0)}},{key:"onEnter",value:function(e,t,a,o,r,i){t.__defaultCursor=a.getView().style.cursor,t.a(ue.DISABLED)?a.setCursor("not-allowed"):a.setCursor("pointer"),t.a(ue.DISABLED)||t.a(ue.HOVER,!0)}},{key:"onLeave",value:function(e,t,a,o,r,i){a.setCursor(t.__defaultCursor||"default"),delete t.__defaultCursor,t.a(ue.HOVER,!1)}}]),t}(),T=function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,E),a(t,[{key:"onUp",value:function(e,t,a,o,r,i){t.a(ue.DISABLED)||(t.a(ue.PRESSED,!1),t.a(ue.ON_CLICK)&&0<o.x&&o.x<r&&0<o.y&&o.y<i&&t.a(ue.ON_CLICK)(e,t,a))}}]),t}(),k=function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,E),a(t,[{key:"onUp",value:function(e,t,a,o,r,i){if(!t.a(ue.DISABLED)){t.a(ue.PRESSED,!1);var n=ue.CHECKED,l=ue.FORM_ITEM_GROUP,u=ue.ON_CHANGE,h=ue.VALUE;if(!t.a(n)&&0<o.x&&o.x<r&&0<o.y&&o.y<i){var s=t.a(n);if(a&&a.dm()&&!s&&t.a(l)){var d=t.a(l);a.dm().each(function(e){d===e.a(l)&&e.a(n,!1)})}t.a(n,!0),t.a(u)&&t.a(u)(void 0===t.a(h)||t.a(h),t,a)}}}}]),t}(),C=function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,E),a(t,[{key:"onUp",value:function(e,t,a,o,r,i){if(!t.a(ue.DISABLED)){t.a(ue.PRESSED,!1);var n=ue.CHECKED,l=ue.FORM_ITEM_GROUP,u=ue.ON_CHANGE,h=ue.VALUE;if(0<o.x&&o.x<r&&0<o.y&&o.y<i){var s=t.a(n);if(t.a(n,!s),t.a(u)){var d=t.a(l);if(d){var g=[];a.dm().each(function(e){d===e.a(l)&&e.a(n)&&g.push(e.a(h))}),t.a(u)(g)}else t.a(u)(!s,t,a)}}}}}]),t}(),I=function(){function o(t,e,a){l(this,o),this.data=t,this.graph=e,this.valueType=a,this._documentClickHandler=this.documentClickHandler.bind(this),ht.Default.addMethod(t,{isInstant:function(){return this.s("instant")},setInstant:function(e){t.s("instant",e)}})}return a(o,[{key:"init",value:function(){var e=this.data,t=this.graph,a=t.getZoom(),o=t.tx(),r=t.ty(),i=this.value,n=new this.dropDownClazz,l=n._dropDownView=n.initDropDownView(e,this.getDatas(),i);n.getDropDownView=function(){return l},l.on("d:click",function(e){e.stopPropagation()}),l.on("d:mousedown",function(e){e.stopPropagation()}),l.on("d:mouseup",function(e){e.stopPropagation()}),this._dropDown=n,this._dropDownView=l,this.onInit(n,l);var u=e.getWidth()*a,h=e.getHeight()*a;this.prepareLayoutDropDown(n,l,{left:e.getX()*a+o-u*e.getAnchor().x,top:e.getY()*a+r-h*e.getAnchor().y,width:u,height:h}),ht.Default.appendToScreen(l.getView()),n.addValueChangeListener(this.handleDropDownValueChange,this),n.addDropDownListener(this.handleDropDownChange,this),this.registerCloseEvent(this._documentClickHandler),n.afterOpen(i),l.iv(!0)}},{key:"onInit",value:function(e,t){}},{key:"getDatas",value:function(){return null}},{key:"prepareLayoutDropDown",value:function(e,t,a){var o=e.getWidth(),r=e.getHeight(),i=ht.Default.getWindowInfo(),n=a.left+i.left,l=a.top+a.height+i.top;n+o>i.left+i.width&&(n=i.left+i.width-o),l+r>i.top+i.height&&(l-=a.height+r)<i.top&&(l=i.top),t.setX(Math.max(0,n)),t.setY(l),t.setWidth(o),t.setHeight(r)}},{key:"registerCloseEvent",value:function(e){ht.Default.isTouchable?document.addEventListener("touchstart",e):document.addEventListener("mousedown",e)}},{key:"unregisterCloseEvent",value:function(e){ht.Default.isTouchable?document.removeEventListener("touchstart",e):document.removeEventListener("mousedown",e)}},{key:"_clearDropDown",value:function(){this._dropDown=this._dropDownView=null,this.data.a(ue.EDITING,!1)}},{key:"documentClickHandler",value:function(e){var t=this.data,a=this.graph;if(ht.Default.isLeftButton(e)){var o=this._dropDown;if(this._dropDownView){var r=t.getWidth(),i=t.getHeight(),n=a.tx(),l=a.ty(),u=a.getZoom(),h={x:t.getX()*u+n-r*t.getAnchor().x,y:t.getY()*u+l-i*t.getAnchor().y,width:r,height:i};ht.Default.containsPoint(h,ht.Default.getClientPoint(e))||o.isClickOnDropDownView(e)||this.close()}}}},{key:"close",value:function(){this._dropDown&&(this._dropDown.cancel(),this.data.a(ue.EDITING,!1),delete this._dropDown,delete this._dropDownView)}},{key:"handleDropDownValueChange",value:function(e){this.value=e.value}},{key:"open",value:function(){this.isOpened()||(this.init(),this.data.a(ue.EDITING,!0))}},{key:"isOpened",value:function(){return!!this._dropDown}},{key:"handleDropDownChange",value:function(e){this.data;var t=this,a=t._dropDown,o=t._dropDownView;if(a){if(a.beforeClose(),"stop"===e.kind){var r=a.getDropDownValue();void 0!==r&&(this.value=r)}t._clearDropDown(),ht.Default.removeHTML(o.getView()),a.removeValueChangeListener(t.handleDropDownValueChange,t),this.unregisterCloseEvent(this._documentClickHandler),a.afterClose()}}},{key:"value",get:function(){var e=this.data,t=this.valueType.split("@"),a=re(t,2),o=a[0],r=a[1];if("a"===o)return e.a(r);if("s"===o)return e.s(r);if("p"===o){var i=ht.Default.getter(r);if(e[i])return e[i]()}return null},set:function(e){var t=this.data,a=this.valueType,o=this.graph,r=a.split("@"),i=re(r,2),n=i[0],l=i[1],u=t.a(ue.ON_CHANGE),h=this.value;if("a"===n)t.a(l,e);else if("s"===n)t.s(l,e);else if("p"===n){var s=ht.Default.setter(l);t[s]&&t[s](e)}u&&u(h,e,t,o)}}]),o}(),x=function(e){function r(e,t,a){l(this,r);var o=h(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t,a));return o.dropDownClazz=ht.ui.ColorDropDown,o}return u(r,I),r}(),A=function(e,t,a){var o=e.a(ue.DROP_DOWN);o||(o=new x(e,t,a),e.a(ue.DROP_DOWN,o)),o.open()},L=function(e){function r(e,t,a){l(this,r);var o=h(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t,a));return o.dropDownClazz=ht.ui.DateTimeDropDown,o}return u(r,I),a(r,[{key:"onInit",value:function(e,t){var a=this.data.a(ue.DATE_TYPE);e.setPropertyValue("dateTimePane.type",a,!0)}}]),r}(),R=function(e,t,a){var o=e.a(ue.DROP_DOWN);o||(e.getFormat=function(){return e.a(ue.FORMAT)},o=window.dp=new L(e,t,a),e.a(ue.DROP_DOWN,o)),o.open()},P=(function(e){function r(e,t,a){l(this,r);var o=h(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t,a));return o.dropDownClazz=ht.ui.ListDropDown,o}u(r,I),a(r,[{key:"getDatas",value:function(){return[{id:void 0,label:""},{id:"0",label:"Female"},{id:"1",label:"Male"}]}}])}(),function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,E),a(t,[{key:"onUp",value:function(e,t,a,o,r,i){t.a(ue.DISABLED)||(t.a(ue.PRESSED,!1),0<o.x&&o.x<r&&0<o.y&&o.y<i&&A(t,a,"a@ht.value"))}}]),t}()),B=function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,E),a(t,[{key:"onUp",value:function(e,t,a,o,r,i){t.a(ue.DISABLED)||(t.a(ue.PRESSED,!1),0<o.x&&o.x<r&&0<o.y&&o.y<i&&R(t,a,"a@ht.value"))}}]),t}(),H=function(e){function t(e){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return u(t,e),a(t,[{key:"handle_mousedown",value:function(e){this.handle_touchstart(e)}},{key:"handle_touchstart",value:function(e){if(e.stopPropagation(),!this.gv.isOnScrollBar(e)){var t=this.gv,a=t.getDataAt(e);a&&t.sm().ss(a)}}},{key:"handle_mousemove",value:function(e){var t=this.gv,a=t._hoverData,o=t.getDataAt(e);o!==a&&(t._hoverData=o&&t.sm().contains(o)?null:o,t.redraw())}},{key:"handle_mouseleave",value:function(e){var t=this.gv;t._hoverData&&(t._hoverData=null,t.redraw())}},{key:"handle_mouseup",value:function(e){this.handle_touchend(e)}},{key:"handle_touchend",value:function(e){}}]),t}(ht.graph.Interactor),N={hoverDarker:5,activeDarker:11,baseColor:"#3399ff",baseColor2:"#737373",hoverBackground:"#eeeeee",emptyColor:"#ffffff",fontSize:12,fontFamily:"arial, sans-serif",font:"12px arial sans-serif",disabledColor:"#ebebeb",disabledBackground:"#fafafa",inputTextColor:"#111111",placeholderColor:"#737373"},Ae=function(e){function o(e){l(this,o);var t=h(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));t.setInteractors([new ht.graph.ScrollBarInteractor(t),new H(t),new ht.graph.DefaultInteractor(t),new ht.graph.TouchInteractor(t,{editable:!1})]),t.addBottomPainter(t.drawBottomPainter.bind(t)),t.setAutoHideScrollBar(!1),t._nodes=[];var a=t.getView().style;return a.transition="all 0.2s",a.transitionOrigin="0 0",t}return u(o,e),a(o,[{key:"adjustTranslateX",value:function(){return 0}},{key:"isMovable",value:function(){return!1}},{key:"adjustZoom",value:function(){return 1}},{key:"adjustTranslateY",value:function(e){this.getContentRect();var t=this.getHeight()-this.dm().size()*this._rowHeight;return 0<=e||0<=t?0:t<e?e:t}},{key:"handleScroll",value:function(e){var t=Ze?-e.detail:e.wheelDelta/40;(Ze||e.wheelDelta!==e.wheelDeltaX)&&this.translate(0,t)}},{key:"onPropertyChanged",value:function(e){O(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"onPropertyChanged",this).call(this,e);var t=e.property;"dataModel"!==t&&"fileSize"!==t||this.doLayoutLater()}},{key:"doLayoutLater",value:function(){this._doLayoutLater||(this._doLayoutLater=!0,ht.Default.callLater(this.doLayout,this))}},{key:"onValidated",value:function(){this._lastWidth!==this.getWidth()&&this.doLayoutLater()}},{key:"isVisible",value:function(e){return!0}},{key:"doLayout",value:function(){var t=this;this._doLayoutLater=!1;this._lastWidth=this.getWidth();var a=this._iconHeight,o=this._iconWidth,r=this._rowHeight,i=this._nodes=[];this.dm().getDatas().each(function(e){t.isVisible(e)&&i.push(e)}),this._lastHeight=this.getHeight();var n=8+.5*o,l=.5*r;i.forEach(function(e,t){e.setSize(o,a),e.p(n,l),l+=r})}},{key:"drawBottomPainter",value:function(t){var a=this,o=this._rowHeight,r=this.getWidth(),i=this._hoverData;this.dm().toDatas(this.isVisible,this).each(function(e){a.isSelected(e)?(t.beginPath(),t.rect(0,e.p().y-o/2,r,o),t.fillStyle=a.getActiveColor()||N.baseColor,t.fill()):e===i&&(t.beginPath(),t.rect(0,e.p().y-o/2,r,o),t.fillStyle=a.getHoverBackground()||N.hoverBackground,t.fill())})}},{key:"getDataAt",value:function(e){var t=Math.floor(this.lp(e).y/this._rowHeight);return this._nodes[t]}},{key:"handleSelectionChange",value:function(e){O(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"handleSelectionChange",this).call(this,e),this.redraw()}},{key:"getSelectWidth",value:function(){return 0}},{key:"isOnScrollBar",value:function(e){var t=this.getViewRect(),a=this.getScrollRect(),o=this.getScrollBarSize(),r=this.lp(e);return ht.Default.isTouchable&&(o*=1.5),a.height>t.height&&r.x-t.x>t.width-o}}]),o}(ht.graph.GraphView);nt(Ae,{ms_ac:["rowHeight","iconWidth","iconHeight","activeColor","hoverBackground"],_rowHeight:26,_iconWidth:20,_iconHeight:20});var Le=function(e){function r(e,t){l(this,r);var a=h(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));a.setSelectionMode(n),a._master=e,a._masterGraph=t,a._transition=!1,a._documentClickHandler=a.documentClickHandler.bind(a),a._previousValue=null,a.dm().setAutoAdjustIndex(!1);var o=a.getView().style;return o.height=0,o.boxShadow="rgba(0, 0, 0, 0.3) 0px 8px 22px",tt(o,"transition","all 0.3s esse-in"),a.getView().addEventListener("click",function(e){a.isOnScrollBar(e)||a.handleSelectData(e)}),a.sm().ms(function(e){a.dm().each(function(e){e instanceof ht.Text&&e.s("text.color",a.getLabelColor(e))})}),a.mp(function(e){"background"===e.property&&(o.background=e.newValue)}),a._initStyleByMaster(),a}return u(r,Ae),a(r,[{key:"_initStyleByMaster",value:function(){var e=this._master;this.setIconHeight(e.a(ue.DROP_ICON_WIDTH)),this.setIconWidth(e.a(ue.DROP_ICON_HEIGHT)),this.setRowHeight(e.a(ue.DROP_ROW_HEIGHT)),this.setDropWidth(e.a(ue.DROP_WIDTH)),this.setBackground(e.a(ue.DROP_BACKGROUND)),this.setHoverBackground(e.a(ue.DROP_HOVER_BACKGROUND)),this.setActiveColor(e.a(ue.DROP_ACTIVE_BACKGOUND)),this.setDropLabelColor(e.a(ue.DROP_LABEL_COLOR)),this.setDropActiveLabelColor(e.a(ue.DROP_ACTIVE_LABEL_COLOR)),this.setDropLabelFont(e.a(ue.DROP_LABEL_FONT)),this.setMaxHeight(e.a(ue.DROP_MAX_HEIGHT))}},{key:"handleSelectData",value:function(e){var t=this._master,a=t.a(ue.ON_CHANGE),o=t.a(ue.DATA_SOURCE);o&&0!==o.length&&(t.a(ue.VALUE,this.getValue()),t.a(ue.LABEL,this.__getLabel()),this.sm().ld()&&t.a(ue.ICON,this.sm().ld().a("icon")),a&&a(this._previousValue,this.getValue(),t,this._masterGraph),this.close())}},{key:"setSelectionMode",value:function(e){i!==e&&n!==e||this.sm().setSelectionMode(e)}},{key:"getNodeValue",value:function(e){return e.a("value")||e.s("label")||e.s("text")}},{key:"getNodeLabel",value:function(e){return e.s("label")||e.s("text")||e.a("value")}},{key:"setData",value:function(e){var a=this,o=this.dm();o.clear(),e&&e.length&&(e.forEach(function(e){var t;e.icon?((t=new ht.Node).setImage(e.icon),t.s({pixelPerfect:!1,"image.stretch":"uniform",label:e.label,"label.position":20,"label.offset.x":4,"label.font":a.getDropLabelFont()})):(t=new ht.Text).s({text:e.label,"text.color":a.getLabelColor(t),"text.font":a.getDropLabelFont()}),t.a(e),o.add(t)}),this.setDropHeight(Math.min(this.getMaxHeight(),e.length*this.getRowHeight())))}},{key:"getValue",value:function(){var t=this,e=this.sm(),a=e.getSelection(),o=e.getSelectionMode();if(n===o)return 0===a.size()?null:this.getNodeValue(a.get(0));if(i===o){var r=[];return a.each(function(e){r.push(t.getNodeValue(e))}),r}return null}},{key:"__getLabel",value:function(){var t=this,e=this.sm(),a=e.getSelection(),o=e.getSelectionMode();if(n===o)return 0===a.size()?null:this.getNodeLabel(a.get(0));if(i===o){var r=[];return a.each(function(e){r.push(t.getNodeLabel(e))}),r}return null}},{key:"toggle",value:function(){this._transition||(this._opened?this.close():this.open())}},{key:"__scrollToIndex",value:function(e){this.dm().getDatas(),this.sm();var t=this.getMaxHeight(),a=this.getRowHeight();t<e*a?this.ty(t-(e+1)*a):this.ty(0)}},{key:"open",value:function(){var a=this,e=this._master,t=(this._masterGraph,this.getView().style),o=this.getDropWidth(),r=this.getDropHeight(),i=e.a(ue.VALUE);this.sm().cs(),i?"string"==typeof i?this.dm().each(function(e,t){e.a("value")===i&&(a.sm().ss(e),a.__scrollToIndex(t))}):i.length&&i.forEach(function(t){a.dm().each(function(e){e.a("value")===t&&a.sm().as(e)})}):this.ty(0),this._previousValue=i,e.a(ue.EDITING,!0),this.layoutByMaster(),this.setWidth(o),this.setHeight(r),tt(t,"transform","scaleY(0)"),document.body.appendChild(this.getView()),this._transition=!0,this.registerCloseEvent(this._documentClickHandler),this.doLayout(),ht.Default.callLater(function(){tt(t,"transform","scaleY(1)"),setTimeout(function(){a.redraw(),a.setOpened(!0),a._transition=!1},300)})}},{key:"layoutByMaster",value:function(){var e=lt(this._master,this._masterGraph),t=ht.Default.getWindowInfo(),a=this.getView().style,o=this.getDropWidth(),r=this.getDropHeight(),i=Math.max(0,e.x),n=e.y+e.height,l="50% 0";n+r>t.height&&n-e.height>r&&(n=n-r-e.height,l="50% 100%"),i+o>t.width&&(i=t.width-o),a.left=i+"px",a.top=n+"px",tt(a,"transformOrigin",l)}},{key:"onOpen",value:function(){}},{key:"close",value:function(){var e=this;if(!this._transition){var t=this.getView(),a=t.style;this._master.a(ue.EDITING,!1),this._transition=!0,this.unRegisterCloseEvent(this._documentClickHandler),tt(a,"transform","scaleY(0)"),setTimeout(function(){document.body.removeChild(t),e._transition=!1,e.setOpened(!1)},301)}}},{key:"registerCloseEvent",value:function(e){ht.Default.isTouchable?document.addEventListener("touchstart",e):document.addEventListener("mousedown",e)}},{key:"unRegisterCloseEvent",value:function(e){ht.Default.isTouchable?document.removeEventListener("touchstart",e):document.removeEventListener("mousedown",e)}},{key:"documentClickHandler",value:function(e){var t=lt(this._master,this._masterGraph);ht.Default.containsPoint(t,ht.Default.getClientPoint(e))||this.close()}},{key:"getLabelColor",value:function(e){return this.sm().co(e)?this.getDropActiveLabelColor():this.getDropLabelColor()}}]),r}();nt(Le,{ms_ac:["background","dropWidth","dropHeight","maxHeight","opened","dropLabelFont","dropLabelColor","dropActiveLabelColor"],_background:N.emptyColor,_dropWidth:200,_dropHeight:100,_maxHeight:400,_opened:!1,_dropLabelColor:N.inputTextColor});var Re=function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,E),a(t,[{key:"onUp",value:function(e,t,a,o,r,i){var n,l,u;t.a(ue.DISABLED)||(t.a(ue.PRESSED,!1),0<o.x&&o.x<r&&0<o.y&&o.y<i&&(l=a,(u=(n=t).__dropDown)||(u=window.dd=new Le(n,l),n.__dropDown=u),u.isOpened()||u.setData(n.a(ue.DATA_SOURCE)),u.toggle()))}},{key:"onDrag",value:function(e,t,a,o,r,i){var n=t.__dropDown;n&&n._opened&&n.layoutByMaster()}}]),t}(),Pe=Math.max,Se=Math.min,Be=ht.Default.containsPoint,He=function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,V),a(t,[{key:"onBeginDrag",value:function(e,t,a,o,r,i){var n=vt(a,t).interactiveInfo;if(n){var l=n.minX,u=n.minY,h=n.scrollBarX,s=n.scrollBarY,d=n.scaleX,g=n.scaleY;if(h&&Be(ft(h),o))this._dragInfo={downPoint:o,startX:t.a(ue.TRANSLATE_X),scaleX:d,minX:l,axis:"x"};else if(s&&Be(ft(s),o))this._dragInfo={downPoint:o,startY:t.a(ue.TRANSLATE_Y),scaleY:g,minY:u,axis:"y"};else{var c=t.a(ue.SHOW_HEAD),f=t.a(ue.HEAD_HEIGHT);if(Be({x:0,y:c?f:0,width:r,height:c?i-f:i},o)&&(h||s)){var v=this._dragInfo={downPoint:o,isPan:!0};this._dragInfo={downPoint:o,startX:t.a(ue.TRANSLATE_X),startY:t.a(ue.TRANSLATE_Y),scaleX:d,minX:l,scaleY:g,minY:u,isPan:!0},h&&(v.startX=t.a(ue.TRANSLATE_X),v.scaleX=d,v.minX=l),s&&(v.startY=t.a(ue.TRANSLATE_Y),v.scaleY=g,v.minY=u)}}t.a(ue.SCROLL_BAR_VISIBLE,!!this._dragInfo)}}},{key:"onDrag",value:function(e,t,a,o,r,i){if(this._dragInfo){var n=this._dragInfo,l=n.axis,u=n.minX,h=n.minY,s=n.downPoint,d=n.startX,g=n.startY,c=n.scaleX,f=n.scaleY,v=n.isPan;if("x"===l){var p=d+(s.x-o.x)/c;p=Se(0,p),p=Pe(u,p),t.a(ue.TRANSLATE_X,p)}else if("y"===l){var _=g+(s.y-o.y)/f;_=Se(0,_),_=Pe(h,_),t.a(ue.TRANSLATE_Y,_)}else if(v){if(void 0!==d){var y=d+(o.x-s.x);y=Se(0,y),y=Pe(u,y),t.a(ue.TRANSLATE_X,y)}if(void 0!==g){var D=g+(o.y-s.y);D=Se(0,D),D=Pe(h,D),t.a(ue.TRANSLATE_Y,D)}}}}},{key:"onEndDrag",value:function(e,t,a,o,r,i){this._dragInfo=null,this.addHideBarTimer(t)}},{key:"onScroll",value:function(e,t,a,o,r,i){var n=vt(a,t);if(n&&n.interactiveInfo){var l=n.interactiveInfo,u=l.scrollBarX,h=l.scrollBarY,s=l.minX,d=l.minY;if(h){re(h,4);var g=t.a(ue.TRANSLATE_Y)+e.scrollDelta;g=Se(0,g),g=Pe(d,g),t.a(ue.TRANSLATE_Y,g)}else if(u){re(u,4);var c=t.a(ue.TRANSLATE_X)+e.scrollDelta;c=Se(0,c),c=Pe(s,c),t.a(ue.TRANSLATE_X,c)}var f=t.a(ue.AUTO_HIDE_SCROLL_BAR);(u||h)&&f&&(t.a(ue.SCROLL_BAR_VISIBLE,!0),this.addHideBarTimer(t))}}},{key:"addHideBarTimer",value:function(e){var t=this;this._hideBarTimer&&(clearTimeout(this._hideBarTimer),this._hideBarTimer=null),this._hideBarTimer=setTimeout(function(){t._dragInfo||e.a(ue.SCROLL_BAR_VISIBLE,!1)},200)}}]),t}(),Ne=function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,He),a(t,[{key:"onDown",value:function(e,t,a,o,r,i){var n=t.a(ue.HOVER_INDEX);if(null!=n){var l=t.a(ue.DATA_SOURCE)||[],u=t.a(ue.ON_SELECT_ROW);l&&l[n]&&(t.a(ue.SELECT_INDEX,n),u&&u(l[n],t,a))}}},{key:"onMove",value:function(e,t,a,o,r,i){var n=t.__rowHeights,l=t.__columnWidths,u=t.a(ue.HOVER_INDEX),h=t.a(ue.HEAD_HEIGHT),s=t.a(ue.SHOW_HEAD),d=t.a(ue.ON_HOVER_CELL),g=t.a(ue.TRANSLATE_Y)||0,c=t.a(ue.TRANSLATE_X)||0,f=null,v=null;if(0<(g=Math.floor(o.y-g-(s?h:0)))&&n&&n.length){for(var p=f=0;f<n.length&&!(g<(p+=n[f]));f++);f===n.length&&(f=null)}if(d){if(0<(c=Math.floor(o.x-c))&&l&&l.length){for(var _=v=0;v<l.length&&!(c<(_+=l[v]));v++);v===l.length&&(v=null)}var y=t.a(ue.COLUMNS),D=t.a(ue.DATA_SOURCE);if(null!=v&&null!==f&&f<=n.length&&v<=l.length&&y&&D&&y[v].key){var V=y[v],b=D[f],w=b[V.key];V.format&&(w=V.format(w,b,f,v)),d(e,w,b,V,f,v)}else d()}u!==f&&t.a(ue.HOVER_INDEX,f)}},{key:"onLeave",value:function(e,t,a,o,r,i){t.a(ue.HOVER_INDEX,null);var n=t.a(ue.ON_HOVER_CELL);n&&n()}}]),t}(),Me=function(e,t){var a=e.__barRect,o=e.a(ue.MAX),r=e.a(ue.MIN),i=e.a(ue.STEP),n=o-r,l=e.a(ue.VALUE),u=(t.x-a.x)/a.width*n+r,h=e.a(ue.ON_CHANGE);if(u=Math.min(o,u),u=Math.max(r,u),i){var s=u%i;u=u-s+(Math.abs(s)>i/2)*(s<0?-i:i)}e.a(ue.VALUE,u),h&&h(l,u)},We=function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,V),a(t,[{key:"onDown",value:function(e,t,a,o,r,i){if(!t.a(ue.DISABLED)){var n=t.__barRect;ht.Default.containsPoint(n,o)&&Me(t,o)}}},{key:"onMove",value:function(e,t,a,o,r,i){var n=t.__sliderRect,l=t.a(ue.SHOW_TOOLTIP),u=t.a(ue.TOOLTIP_FORMAT);if(ht.Default.containsPoint(n,o)&&l){var h=t.a(ue.VALUE);_t.show(u?u(h):h,e)}else this.__dragging||_t.hide()}},{key:"onEnter",value:function(e,t,a,o,r,i){t.__defaultCursor=a.getView().style.cursor,t.a(ue.DISABLED)?a.setCursor("not-allowed"):a.setCursor("pointer")}},{key:"onLeave",value:function(e,t,a,o,r,i){a.setCursor(t.__defaultCursor||"default"),delete t.__defaultCursor,this.__dragging||_t.hide()}},{key:"onBeginDrag",value:function(e,t,a,o,r,i){if(!t.a(ue.DISABLED)){var n=t.__sliderRect;ht.Default.containsPoint(n,o)&&(t.__dragging=!0)}}},{key:"onDrag",value:function(e,t,a,o,r,i){if(t.__dragging){Me(t,o);var n=t.a(ue.SHOW_TOOLTIP),l=t.a(ue.TOOLTIP_FORMAT),u=t.a(ue.VALUE);n&&_t.show(l?l(u):u,e)}}},{key:"onEndDrag",value:function(e,t,a,o,r,i){t.__dragging=!1,_t.hide()}}]),t}(),Ge=function(e,t,a){var o=e.__barRect,r=e.a(ue.MAX),i=e.a(ue.MIN),n=e.a(ue.STEP),l=r-i,u=(t.x-o.x)/o.width*l+i,h=e.a(ue.VALUE),s=h[0],d=h[1],g=e.a(ue.ON_CHANGE);if(u=Math.min(r,u),u=Math.max(i,u),n){var c=u%n;u=u-c+(Math.abs(c)>n/2)*(c<0?-n:n)}var f=null;if(e.__dragging){var v=e.__dragging;f=v<=u?[v,u]:[u,v]}else{var p=Math.abs(s-u);f=Math.abs(d-u)<=p?[s,u]:[u,d]}return a||e.a(ue.VALUE,f),g&&g(h,f),u},Ue=function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,V),a(t,[{key:"onDown",value:function(e,t,a,o,r,i){if(!t.a(ue.DISABLED)){var n=t.__barRect,l=t.__valueBarRect;t.a(ue.VALUE_BAR_DRAGGABLE)&&ht.Default.containsPoint(l,o)||ht.Default.containsPoint(n,o)&&Ge(t,o)}}},{key:"onMove",value:function(e,t,a,o,r,i){var n=t.__sliderRect,l=t.__sliderRect2,u=t.a(ue.SHOW_TOOLTIP),h=t.a(ue.TOOLTIP_FORMAT),s=t.a(ue.VALUE);ht.Default.containsPoint(n,o)&&u?_t.show(h?h(s[0]):s[0],e):ht.Default.containsPoint(l,o)&&u?_t.show(h?h(s[1]):s[1],e):this.__dragging||_t.hide()}},{key:"onEnter",value:function(e,t,a,o,r,i){t.__defaultCursor=a.getView().style.cursor,t.a(ue.DISABLED)?a.setCursor("not-allowed"):a.setCursor("pointer")}},{key:"onLeave",value:function(e,t,a,o,r,i){a.setCursor(t.__defaultCursor||"default"),delete t.__defaultCursor,this.__dragging||_t.hide()}},{key:"onBeginDrag",value:function(e,t,a,o,r,i){if(!t.a(ue.DISABLED)){var n=t.__sliderRect,l=t.__sliderRect2,u=t.__valueBarRect,h=t.a(ue.VALUE_BAR_DRAGGABLE);ht.Default.containsPoint(n,o)?t.__dragging=t.a(ue.VALUE)[1]:ht.Default.containsPoint(l,o)?t.__dragging=t.a(ue.VALUE)[0]:h&&ht.Default.containsPoint(u,o)&&(t.__draggingValueBar=Ge(t,o,!0))}}},{key:"onDrag",value:function(e,t,a,o,r,i){var n=t.a(ue.SHOW_TOOLTIP),l=t.a(ue.TOOLTIP_FORMAT);if(void 0!==t.__dragging){var u=Ge(t,o);n&&_t.show(l?l(u):u,e)}else if(void 0!==t.__draggingValueBar){var h=t.__draggingValueBar,s=Ge(t,o,!0),d=s-h,g=t.a(ue.VALUE),c=t.a(ue.MIN),f=t.a(ue.MAX),v=[g[0]+d,g[1]+d];v[0]<c?v=[c,c+(g[1]-g[0])]:v[1]>f&&(v=[f-(g[1]-g[0]),f]),t.__draggingValueBar=s,t.a(ue.VALUE,v),n&&_t.show(v,e)}}},{key:"onEndDrag",value:function(e,t,a,o,r,i){delete t.__dragging,delete t.__draggingValueBar,_t.hide()}}]),t}(),Xe=ht.Default.setImage;Xe("ht.vector.date",{width:16,height:16,comps:[{type:"roundRect",borderColor:"#ffffff",cornerRadius:1,rect:[1.5,6.54942,12.94,8]},{type:"shape",borderWidth:1,borderColor:"#ffffff",borderCap:"round",closePath:!0,points:[1.5,2.4523,14.44,2.4523,14.44,2.4523,14.44,2.4523,14.44,14.54942,14.44,14.54942,14.44,14.54942,1.5,14.54942,1.5,14.54942,1.5,14.54942,1.5,2.4523,1.5,2.4523,1.5,2.4523,1.5,2.4523],segments:[1,2,3,2,3,2,3,2,3,2]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[4.46,1,4.46,4]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[11.5,1,11.5,4]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[3.52013,9.50677,7.00013,9.50677,9.00013,9.50677,12.50756,9.50677],segments:[1,2,1,2]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[3.52,12.52535,12.50756,12.52535]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[3.52013,6.54942,7.00013,6.54942,9.00013,6.54942,12.50756,6.54942],segments:[1,2,1,2]}]}),Xe("ht.vector.dropDownIcon",{width:18,height:10,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",points:[1,1,9,9,17,1]}]});var Fe,Ye,je,ze=function(){function t(){l(this,t);var e=(this._container=document.createElement("div")).style;e.boxSizing="border-box",e.padding="5px 12px",e.margin=0,e.position="absolute",e.backgroundColor="rgba(0, 0, 0, 0.5)",e.color="rgb(247,247,247)",e.borderRadius="5px",e.webkitTransition="all 0.5",e.transition="all 0.5"}return a(t,[{key:"show",value:function(e,t){this._container.innerText=e,document.body.appendChild(this._container),this.update(t)}},{key:"update",value:function(e){var t=this._container.getBoundingClientRect(),a=ht.Default.getWindowInfo(),o=(this._container.style,(e.clientX||e.pageX)+8),r=(e.clientY||e.pageY)+8;o=Math.max(0,o),r=Math.max(0,r),o+t.width>a.width&&(o=a.width-t.width),r+t.height>a.height&&(r=a.height-t.height),this._container.style.left=o+"px",this._container.style.top=r+"px"}},{key:"hide",value:function(){this._container.parentNode===document.body&&document.body.removeChild(this._container)}}]),t}(),Ke={comp:{button:function(e,t,a,o,r){var i=a.getValue("text"),n=a.getValue("disabled"),l=a.getValue("font"),u=a.getValue("icon"),h=a.getValue("iconPosition"),s=a.getValue("iconWidth"),d=a.getValue("iconHeight"),g=a.getValue("iconGap"),c=a.getValue("iconColor"),f=a.getValue("hoverIconColor"),v=a.getValue("activeIconColor"),p=a.getValue("textColor"),_=a.getValue("hoverTextColor"),y=a.getValue("activeTextColor"),D=a.getValue("disabledTextColor"),V=a.getValue("borderWidth"),b=a.getValue("borderColor"),w=a.getValue("hoverBorderColor"),m=a.getValue("activeBorderColor"),E=a.getValue("disabledBorderColor"),T=a.getValue("background"),k=a.getValue("hoverBackground"),C=a.getValue("activeBackground"),I=a.getValue("disabledBackground"),O=a.getValue("borderRadius"),x=Je(Z),A=(re(x,4),qe(O)),L=re(A,4),R=L[0],P=L[1],S=L[2],B=L[3],H=t.x,N=t.y,M=t.width,W=t.height;if(n?(T=I,b=E,p=D,V||(V=1)):(T=it(o,T,k,C,!0),b=it(o,b,w,m,!0),c=it(o,c,f,v,!1,!0),p=it(o,p,_,y,!0)),e.fillStyle=T,e.beginPath(),ht.Default.drawRoundRect(e,H,N,M,W,R,P,B,S),e.closePath(),e.fill(),V&&b&&(e.strokeStyle=b,e.lineWidth=V,e.stroke()),!u&&i)j(e,i,l,p,H,N,M,W,"center","middle");else if(u&&!i)z(e,K(u),"uniform",H+.5*(M-s),N+.5*(W-d),s,d,o,r,c);else if(u&&i){var G=$e(l,i),U=void 0,X=void 0;if(ne===h||le===h){var F=N+.5*(W-d-G.height-g);U={x:H,height:G.height,width:M},X={x:H+.5*(M-s),width:s,height:d},ne===h?(U.y=F+d+g,X.y=F):le===h&&(U.y=F,X.y=F+G.height+g)}else{var Y=H+.5*(M-s-G.width-g);U={width:G.width,y:N,height:W},X={y:.5*(W-d),width:s,height:d},he===h?(U.x=Y,X.x=Y+G.width+g):(U.x=Y+s+g,X.x=Y)}j(e,i,l,p,U.x,U.y,U.width,U.height,"center","middle"),z(e,K(u),"uniform",X.x,X.y,X.width,X.height,o,r,c)}},input:function(e,t,a,o,r){var i=a.getValue("value"),n=a.getValue("placeholder"),l=a.getValue("disabled"),u=a.getValue("borderWidth"),h=a.getValue("borderColor"),s=a.getValue("disabledBorderColor")||h,d=a.getValue("focusBorderColor")||h,g=a.getValue("borderRadius"),c=a.getValue("padding"),f=a.getValue("background"),v=a.getValue("disabledBackground")||f,p=a.getValue("focusBackground")||f,_=a.getValue("icon"),y=a.getValue("iconWidth"),D=a.getValue("iconHeight"),V=a.getValue("iconAlign"),b=a.getValue("font"),w=a.getValue("textAlign"),m=a.getValue("textColor"),E=a.getValue("disabledTextColor"),T=o&&o.a(ue.EDITING),k=qe(c),C=re(k,4),I=C[0],O=C[1],x=C[2],A=C[3],L=qe(g),R=re(L,4),P=R[0],S=R[1],B=R[2],H=R[3],N=t.x,M=t.y,W=t.width,G=t.height,U=void 0;if(o?l?(U=v,h=s,m=E,u||(u=1)):T?(U=p,h=d):U=f:U=f,e.beginPath(),ht.Default.drawRoundRect(e,N,M,W,G,P,S,H,B),e.closePath(),U&&(e.fillStyle=U,e.fill()),(u&&h||T&&u&&d)&&(e.strokeStyle=T?d:h,e.lineWidth=u,e.stroke()),!T){var X=!i&&n,F=i||n||"",Y=Math.max(0,W-A-O),j=Math.max(0,G-I-x),z=N+A,K=M+I;i||!o||o.a(ue.DISABLED)||(m=ie.placeholderColor),e.save(),e.beginPath(),e.rect(z,K,Y,j),e.clip(),!X&&o&&"password"===o.a(ue.INPUT_TYPE)&&(F=function(){for(var e="",t=0;t<F.length;t++)e+="â€¢";return e}()),$(e,F,b,m,z,K,Y,j,w,"middle"),e.restore()}if(_){var Z=void 0;Z="left"===V?N:"center"===V?N+.5*(W-y):N+W-y,q(e,J(_),"uniform",Z,.5*(G-D),y,D,o,r)}},textarea:function(t,e,a,o,r){var i=a.getValue("value"),n=a.getValue("placeholder"),l=a.getValue("disabled"),u=a.getValue("borderWidth"),h=a.getValue("borderColor"),s=a.getValue("disabledBorderColor"),d=a.getValue("focusBorderColor"),g=a.getValue("borderRadius"),c=a.getValue("padding"),f=a.getValue("background"),v=a.getValue("disabledBackground")||f,p=a.getValue("focusBackground")||f,_=a.getValue("textAlign"),y=a.getValue("textColor"),D=a.getValue("disabledTextColor"),V=a.getValue("lineHeight"),b=a.getValue("font"),w=a.getValue("wordBreak"),m=o&&o.a(ue.EDITING),E=qe(c),T=re(E,4),k=T[0],C=T[1],I=T[2],O=T[3],x=qe(g),A=re(x,4),L=A[0],R=A[1],P=A[2],S=A[3],B=e.x,H=e.y,N=e.width,M=e.height,W=void 0;if(o?l?(W=v,h=s,y=D,u||(u=1)):m?(W=p,h=d):W=f:W=f,t.beginPath(),ht.Default.drawRoundRect(t,B,H,N,M,L,R,S,P),t.closePath(),W&&(t.fillStyle=W,t.fill()),(u&&h||m&&u&&d)&&(t.strokeStyle=m?d:h,t.lineWidth=u,t.stroke()),!m){var G=i||n||"",U=Math.max(0,N-O-C),X=Math.max(0,M-k-I);i||(y=ie.placeholderColor),t.save(),t.beginPath(),t.rect(B+O,H+k,U,X),t.clip();var F=ot(G,b,U,w),Y=H+k;F.forEach(function(e){H+M<Y||(Q(t,e,b,y,B+O,Y,U,V,_,"middle"),Y+=V)}),t.restore()}},radio:function(e,t,a,o,r){var i=a.getValue("disabled"),n=a.getValue("checked"),l=a.getValue("normalColor"),u=a.getValue("background"),h=a.getValue("activeColor"),s=a.getValue("disabledColor"),d=a.getValue("disabledBackground"),g=n?h:l,c=t.x,f=t.y,v=t.width,p=t.height,_=Math.min(v,p);o&&(i?(g=s,u=d):o.a(ue.PRESSED)?n?g=ht.Default.darker(g,ie.activeDarker):u=ht.Default.darker(u,ie.activeDarker):o.a(ue.HOVER)&&(n?g=ht.Default.darker(g,ie.hoverDarker):u=ht.Default.darker(u,ie.hoverDarker))),u&&(e.beginPath(),e.fillStyle=u,e.arc(c+.5*v,f+.5*p,.5*_,0,2*Math.PI),e.fill()),e.beginPath(),e.strokeStyle=g,e.lineWidth=1.5,e.arc(c+.5*v,f+.5*p,.5*_,0,2*Math.PI),e.stroke(),n&&(e.beginPath(),e.fillStyle=g,e.arc(c+.5*v,f+.5*p,.25*_,0,2*Math.PI),e.fill()),o&&!o.a(ue.INPUT_TYPE)&&o.a(ue.INPUT_TYPE,y)},checkbox:function(e,t,a,o,r){var i=a.getValue("checked"),n=a.getValue("disabled"),l=a.getValue("borderColor"),u=a.getValue("activeBorderColor"),h=a.getValue("disabledBorderColor"),s=a.getValue("background"),d=a.getValue("activeBackground"),g=a.getValue("disabledBackground"),c=a.getValue("borderRadius"),f=a.getValue("iconColor"),v=a.getValue("disabledIconColor"),p=t.x,_=t.y,y=t.width,D=t.height,V=Math.min(y,D);s=i?d:s,n?(l=h,f=v,s=g):s=it(o,s,null,null,!0),i&&!n&&(l=u),D<y?p+=.5*(y-D):y<D&&(_+=.5*(D-y)),e.beginPath(),ht.Default.drawRoundRect(e,p,_,V,V,c),e.closePath(),s&&(e.fillStyle=s,e.fill()),e.strokeStyle=l,e.lineWidth=1,e.stroke(),i&&(e.beginPath(),e.moveTo(p+.125*V,_+.5*V),e.lineTo(p+V*(3/8),_+.75*V),e.lineTo(p+.8125*V,_+.25*V),e.lineWidth=Math.max(1,V/16),e.lineCap="round",e.strokeStyle=f,e.stroke()),o&&!o.a(ue.INPUT_TYPE)&&o.a(ue.INPUT_TYPE,b)},colorPicker:function(e,t,a,o,r){var i=a.getValue("disabled"),n=a.getValue("borderWidth"),l=a.getValue("borderColor"),u=a.getValue("disabledBorderColor"),h=a.getValue("focusBorderColor"),s=a.getValue("borderRadius"),d=a.getValue("textColor"),g=a.getValue("value"),c=a.getValue("font"),f=a.getValue("fullMode"),v=a.getValue("showDropDownIcon"),p=a.getValue("dropDownIcon"),_=a.getValue("dropDownIconColor"),y=a.getValue("dropDownIconWidth"),D=a.getValue("dropDownIconHeight"),V=qe(s),b=re(V,4),w=b[0],m=b[1],E=b[2],T=b[3],k=t.x,C=t.y,I=t.width,O=t.height,x=k+I+5,A=C+O+5,L=!1,R=void 0;if(i?l=d=u:o&&o.a(ue.EDITING)&&h&&(l=h),e.save(),f){e.beginPath(),ht.Default.drawRoundRect(e,k,C,I,O,w,m,T,E),e.closePath(),e.clip();for(var P=C,S=0;P<A;P+=5,S++){L=S%2!=0;for(var B=k;B<x;B+=5)e.fillStyle=L?F:X,e.fillRect(B,P,5,5),L=!L}}else{x=(R={x:k+4,y:C+4,width:1.66*(O-8),height:O-8}).x+R.width,A=R.y+R.height,e.beginPath(),e.rect(R.x,R.y,R.width,R.height),e.closePath(),e.clip();for(var H=R.y,N=0;H<A;H+=5,N++){L=N%2!=0;for(var M=R.x;M<x;M+=5)e.fillStyle=L?F:X,e.fillRect(M,H,5,5),L=!L}}e.restore(),e.beginPath(),ht.Default.drawRoundRect(e,k,C,I,O,w,m,T,E),e.closePath(),g&&f?(e.fillStyle=g,e.fill()):g&&!f&&(e.fillStyle=g,e.fillRect(R.x,R.y,R.width,R.height),Y.setColor(g),W(e,Y,c,d,R.x+R.width+4,C,I-R.width-8,O,"left","middle")),n&&(e.lineWidth=n,e.strokeStyle=l,e.stroke()),v&&G(e,U(p||"ht.vector.dropDownIcon"),"uniform",k+I-8-y,C+.5*(O-D),y,D,o,r,_)},comboBox:function(e,t,a,o,r){var i=a.getValue("value"),n=a.getValue("placeholder"),l=a.getValue("dataSource"),u=a.getValue("disabled"),h=a.getValue("borderWidth"),s=a.getValue("borderColor"),d=a.getValue("disabledBorderColor"),g=a.getValue("focusBorderColor"),c=a.getValue("borderRadius"),f=a.getValue("padding"),v=a.getValue("background"),p=a.getValue("disabledBackground"),_=a.getValue("focusBackground")||v,y=a.getValue("icon"),D=a.getValue("iconWidth"),V=a.getValue("iconHeight"),b=a.getValue("iconAlign"),w=a.getValue("font"),m=a.getValue("textAlign"),E=a.getValue("textColor"),T=a.getValue("disabledTextColor"),k=a.getValue("dropDownIcon"),C=a.getValue("dropDownIconColor"),I=a.getValue("dropDownIconWidth"),O=a.getValue("dropDownIconHeight"),x=a.getValue("drawUnMatchValue"),A=o&&o.a(ue.EDITING),L=qe(f),R=re(L,4),P=R[0],S=R[1],B=R[2],H=R[3],N=qe(c),M=re(N,4),W=M[0],G=M[1],U=M[2],X=M[3],F=t.x,Y=t.y,j=t.width,z=t.height,K=void 0;o?u?(K=p,s=d,E=T,h||(h=1)):A?(K=_,s=g):K=v:K=v,e.beginPath(),ht.Default.drawRoundRect(e,F,Y,j,z,W,G,X,U),e.closePath(),K&&(e.fillStyle=K,e.fill()),(h&&s||A&&h&&g)&&(e.strokeStyle=A?g:s,e.lineWidth=h,e.stroke());var Z=null;if(x)Z=i;else if(i&&l)for(var $=0,q=l.length;$<q;$++)if(l[$].value===i){Z=l[$].label,y=l[$].icon;break}Z||(y=null);var J=Z||n||"",Q=Math.max(0,j-H-S),ee=Math.max(0,z-P-B),te=F+H,ae=Y+P;if(i||!o||o.a(ue.DISABLED)||(E=ie.placeholderColor),e.save(),e.beginPath(),e.rect(te,ae,Q,ee),e.clip(),ce(e,J,w,E,y?te+D:te,ae,Q,ee,m,"middle"),e.restore(),y){var oe=void 0;oe="left"===b?te:"center"===b?F+.5*(j-D):F+j-D-S,fe(e,ve(y),"uniform",oe,.5*(z-V),D,V,o,r)}fe(e,ve(k||"ht.vector.dropDownIcon"),"uniform",F+j-8-I,Y+.5*(z-O),I,O,o,r,C)},gauge:function(e,t,a,o,r){var i=a.getValue("pointerRadius"),n=a.getValue("pointerColor"),l=a.getValue("value"),u=a.getValue("max"),h=a.getValue("showTick"),s=a.getValue("tickEvery"),d=a.getValue("tickColor"),g=a.getValue("tickWidth"),c=(a.getValue("tickRadius"),a.getValue("bigTickEvery")),f=a.getValue("bigTickColor"),v=a.getValue("bigTickWidth"),p=(a.getValue("bigTickRadius"),a.getValue("showLabel")),_=a.getValue("labelEvery"),y=a.getValue("labelColor"),D=a.getValue("labelFont"),V=a.getValue("labelRadius"),b=a.getValue("showShadow"),w=a.getValue("shadowBlur"),m=a.getValue("shadowColor"),E=a.getValue("shadowOffsetX"),T=a.getValue("shadowOffsetY");_e=a.getValue("clockwise"),ye=a.getValue("min"),oe=a.getValue("startAngle"),pe=a.getValue("endAngle"),te=Math.abs(u-ye),ae=Math.abs(pe-oe);var k=t.x,C=t.y,I=t.width,O=t.height,x=Math.min(I,O)/2,A=De(l,_e);if(e.save(),b&&(e.shadowColor=m,e.shadowBlur=w,e.shadowOffsetX=E,e.shadowOffsetY=T),e.translate(k+.5*I,C+.5*O),h){if(c){e.beginPath(),e.strokeStyle=f,e.lineWidth=v;for(var L=ye;L<=u;L+=c){var R=De(L,_e),P=x*Math.cos(R),S=x*Math.sin(R);e.moveTo(.84*P,.84*S),e.lineTo(P,S)}e.stroke()}if(s){e.beginPath(),e.strokeStyle=d,e.lineWidth=g;for(var B=ye;B<=u;B+=s){var H=De(B,_e),N=x*Math.cos(H),M=x*Math.sin(H);e.moveTo(.9*N+k,.9*M+C),e.lineTo(N+k,M+C)}e.stroke()}}if(p&&_){V=ee(V,x),e.font=D,e.fillStyle=y,e.textAlign="center",e.textBaseline="middle";for(var W=ye;W<=u;W+=_){var G=De(W,_e),U=V*Math.cos(G),X=V*Math.sin(G);e.fillText(W,U,X)}}var F=.05*(i=ee(i,x));e.rotate(A),e.beginPath(),e.moveTo(-1.5*F,0),e.lineTo(0,-F),e.lineTo(i,0),e.lineTo(0,F),e.closePath(),e.fillStyle=n,e.fill(),e.restore()},table:function(c,e,t,f,v){var p=t.getValue("columns"),a=t.getValue("dataSource"),o=t.getValue("thBackground"),r=t.getValue("tdBackground"),i=t.getValue("thHeight"),n=t.getValue("tdHeight"),_=t.getValue("textLineHeight"),l=t.getValue("thColor"),y=t.getValue("tdColor"),u=t.getValue("thFont"),D=t.getValue("tdFont"),V=t.getValue("borderWidth"),h=t.getValue("borderColor"),s=t.getValue("columnLineColor"),b=t.getValue("columnLineWidth"),d=t.getValue("rowLineColor"),w=t.getValue("rowLineWidth"),m=t.getValue("showHeadRowLine"),E=t.getValue("cellPadding"),T=t.getValue("showHead"),k=t.getValue("hoverBackground"),C=t.getValue("hoverColor"),I=t.getValue("selectBackground"),O=t.getValue("selectColor"),x=t.getValue("translateY")||0,A=t.getValue("translateX")||0,g=t.getValue("scrollable"),L=t.getValue("autoHideScrollBar"),R=t.getValue("scrollBarColor"),P=t.getValue("scrollBarWidth"),S=t.getValue("scrollBarWidthAbsolute"),B=t.getValue("drawRow"),H=e.x,N=e.y,M=e.width,W=e.height,G=M-2*V,U=W-2*V;if(o&&T&&(c.fillStyle=o,c.fillRect(H,N+V,M,i)),r&&(c.fillStyle=r,c.fillRect(H,N+i*T+V,M,U-i*T)),p&&0<p.length){var X=p.length,F=ct(p,G-b*(X-1)),Y=a.length,j=[];a&&0<Y&&a.forEach(function(e,t){j.push(function(e,t,a){var o=Math.max(t,a);for(var r in e){var i=e[r];if("string"==typeof i){var n=i.match(Ie);n&&n.length&&(o=Math.max(o,t*(n.length+1)))}}return o}(e,_,n))});var z=H+V+A;if(T)for(var K=0;K<X;K++){var Z=p[K],$=F[K]-2*E,q=Z.headColor||Z.color||l;"function"==typeof q&&(q=q(Z)),z+=E,c.save(),c.beginPath(),c.rect(z,N+V,$,i),c.clip(),Ee(c,Z.displayName||Z.key,u,q,z,N+V,$,i,Z.align||"left","middle"),c.restore(),z+=$+b+E}c.save(),c.beginPath(),c.rect(H+V,N+V+(T?i:0),G,U),c.clip();var J=0;if(a&&0<Y&&a.forEach(function(l,u){var h=j[u],s=J+w*(u+m*T*1)+i*T+V+x;if(J+=h,z=H+V+A,!(N+U+h<s||s<N-i)){B&&B(c,l,u,{x:H,y:s,width:M,height:h});var d=f&&f.a(ue.HOVER_INDEX)===u,g=f&&f.a(ue.SELECT_INDEX)===u;g&&I?(c.fillStyle=I,c.fillRect(H,s,M,h)):!g&&d&&k&&(c.fillStyle=k,c.fillRect(H,s,M,h));for(var e=function(e){var o=p[e],t=o.drawCell,r=F[e]-2*E,i=o.bodyColor||o.color||y;g&&O&&(i=O),!g&&d&&C&&(i=C),"function"==typeof i&&(i=i(l[o.key],l)),z+=E;var n=l[o.key];o.format&&(n=o.format(n,l,u,e)),c.save(),c.beginPath(),c.rect(z,s,r,h),c.clip();var a=function(){if(o.isIcon)0<r&&Te(c,ke(l[o.key]),"centerUniform",z,s+1,r,h-2,f,v);else{if(!n)return;var e="string"==typeof n?n.match(Ie):null;if(e&&e.length){var t=n.split(Ie),a=s;"middle"===o.vAlign?a=s+(h-t*_)/2:"bottom"===o.vAlign&&(a=s+(h-t*_)),t.forEach(function(e){Ee(c,e,D,i,z,a,r,_,o.align||"left",o.vAlign||"middle"),a+=_})}else Ee(c,n,D,i,z,s,r,h,o.align||"left",o.vAlign||"middle")}};t?t(c,n,{x:z,y:s,width:r,height:h},{column:o,font:D,color:i,index:e,row:l,defaultDraw:a}):a(),z+=r+b+E,c.restore()},t=0;t<X;t++)e(t)}}),f&&(f.__rowHeights=j,f.__columnWidths=F),f&&g){var Q=b?b*(X-1):0;F.forEach(function(e){Q+=e});var ee={x:H+V,y:N+V+(T?i:0),width:G,height:U-(T?i:0)},te={width:Q,height:J+(Y-1)*w},ae={x:A,y:x},oe=vt(v,f);!function(e,t,a,o){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},i=arguments[5],n=t.x,l=t.y,u=t.width,h=t.height,s=a.width,d=a.height,g=o.x,c=o.y,f=void 0,v=void 0,p=null,_=null,y=void 0,D=void 0,V=r.color,b=void 0===V?"red":V,w=r.barWidth,m=void 0===w?8:w,E=r.gap,T=void 0===E?2:E,k=r.visible;if(e.save(),h<d){var C=h*(D=h/d);_=[n+u-m-T,l+-c*D,m,Math.max(C,me)],v=h-d,k&&(e.beginPath(),we.apply(void 0,[e].concat(ge(_),[Math.min(m,C)/2])),e.fillStyle=b,e.fill())}if(u<s-2){var I=u*(y=u/s);p=[n+-g*y,l+h-m-T,Math.max(I,me),m],f=u-s,k&&(e.beginPath(),we.apply(void 0,[e].concat(ge(p),[Math.min(m,I)/2])),e.fillStyle=b,e.fill())}i&&i.interactiveInfo&&(i.interactiveInfo.scrollBarX=p,i.interactiveInfo.scrollBarY=_,i.interactiveInfo.scaleX=y,i.interactiveInfo.scaleY=D,i.interactiveInfo.minX=f,i.interactiveInfo.minY=v),e.restore()}(c,ee,te,ae,{visible:!L||f.a(ue.SCROLL_BAR_VISIBLE),color:R,barWidth:S?P/v.getZoom():P,gap:2/v.getZoom()},oe)}if(w){var re=N+V+i*T+x;c.beginPath(),m&&T&&(re+=w/2,c.moveTo(H,re),c.lineTo(H+M,re),re+=w/2);for(var ie=0;ie<Y&&(re+=j[ie]+w/2,!(N+W<re));ie++)re<N||(c.moveTo(H,re),c.lineTo(H+M,re)),re+=w/2;c.strokeStyle=d,c.lineWidth=w,c.stroke()}if(c.restore(),b){var ne=V+A;c.beginPath();for(var le=0;le<X-1;le++)ne+=F[le]+b/2,c.moveTo(ne,N),c.lineTo(ne,N+W),ne+=b/2;c.strokeStyle=s,c.lineWidth=b,c.stroke()}}V&&Ce(c,h,H,N,M,W,V)},ruler:function(s,e,t,a,o){t.getValue("value");var d=t.getValue("max"),g=t.getValue("min"),r=t.getValue("labelEvery"),i=t.getValue("labelFont"),n=t.getValue("labelColor"),l=t.getValue("labelAlign"),u=t.getValue("labelDistance"),h=t.getValue("labelOffsetX"),c=t.getValue("labelOffsetY"),f=t.getValue("direction"),v=t.getValue("paddingBefore"),p=t.getValue("paddingAfter"),_=t.getValue("background"),y=t.getValue("smallTickEvery"),D=t.getValue("smallTickColor"),V=t.getValue("smallTickWidth"),b=t.getValue("smallTickLongness"),w=t.getValue("mediumTickEvery"),m=t.getValue("mediumTickColor"),E=t.getValue("mediumTickWidth"),T=t.getValue("mediumTickLongness"),k=t.getValue("largeTickEvery"),C=t.getValue("largeTickColor"),I=t.getValue("largeTickWidth"),O=t.getValue("largeTickLongness"),x=t.getValue("reverse"),A=e.x,L=e.y,R=e.width,P=e.height;_&&(s.fillStyle=_,s.fillRect(A,L,R,P));var S=d-g,B=P;f!==se&&f!==he||(B=R);var H=[{every:y,color:D,longness:b,width:V},{every:w,color:m,longness:T,width:E},{every:k,color:C,longness:O,width:I}];if(x){if(H.forEach(function(e){if(e.every){var t=be(e.longness,B);if(s.beginPath(),s.strokeStyle=e.color,s.lineWidth=e.width,f===ne||f===le){var a=A+R-v,o=(R-v-p)*(e.every/S),r=f===ne?L:L+P;f===le&&(t=0-t);for(var i=g;i<=d;i+=e.every)s.moveTo(a,r),s.lineTo(a,r+t),a-=o}else{var n=L+P-v,l=(P-v-p)*(e.every/S),u=f===se?A:A+R;f===he&&(t=0-t);for(var h=g;h<=d;h+=e.every)s.moveTo(u,n),s.lineTo(u+t,n),n-=l}s.stroke()}}),r){var N=be(u,B);if(s.fillStyle=n,s.font=i,f===ne||f===le){var M=A+R-v+h,W=r/S*(R-v-p),G=(f===ne?L:L+P)+c;f===le?N=0-N-$e(i,"1").height:s.textBaseline="hanging";for(var U=g;U<=d;U+=r){var X=$e(i,U);l===de?Ve(s,U,i,n,M-.5*X.width,G+N,X.width,X.height,l,"middle"):l===he?s.fillText(U,M-$e(i,U).width+2,G+N):l===se&&s.fillText(U,M,G+N),M-=W}}else{var F=L+P-v+c,Y=r/S*(P-v-p),j=(f===se?A:A+R)+h;s.textBaseline="middle",f===he&&(N=0-N);for(var z=g;z<=d;z+=r){var K=z+"";f===he?s.fillText(K,j+N-$e(i,K).width+2,F):s.fillText(K,j+N,F),F-=Y}}}}else if(H.forEach(function(e){if(e.every){var t=be(e.longness,B);if(s.beginPath(),s.strokeStyle=e.color,s.lineWidth=e.width,f===ne||f===le){var a=A+v,o=(R-v-p)*(e.every/S),r=f===ne?L:L+P;f===le&&(t=0-t);for(var i=g;i<=d;i+=e.every)s.moveTo(a,r),s.lineTo(a,r+t),a+=o}else{var n=L+v,l=(P-v-p)*(e.every/S),u=f===se?A:A+R;f===he&&(t=0-t);for(var h=g;h<=d;h+=e.every)s.moveTo(u,n),s.lineTo(u+t,n),n+=l}s.stroke()}}),r){var Z=be(u,B);if(s.fillStyle=n,s.font=i,f===ne||f===le){var $=A+v+h,q=r/S*(R-v-p),J=(f===ne?L:L+P)+c;f===le?Z=0-Z-$e(i,"1").height:s.textBaseline="hanging";for(var Q=g;Q<=d;Q+=r){var ee=$e(i,Q);l===de?Ve(s,Q,i,n,$-.5*ee.width,J+Z,ee.width,ee.height,l,"middle"):l===he?s.fillText(Q,$-$e(i,Q).width+2,J+Z):l===se&&s.fillText(Q,$,J+Z),$+=q}}else{var te=L+v+c,ae=r/S*(P-v-p),oe=(f===se?A:A+R)+h;s.textBaseline="middle",f===he&&(Z=0-Z);for(var re=g;re<=d;re+=r){var ie=re+"";f===he?s.fillText(ie,oe+Z-$e(i,ie).width+2,te):s.fillText(ie,oe+Z,te),te+=ae}}}},multilineText:function(t,e,a,o,r){var i=a.getValue("content"),n=a.getValue("font"),l=a.getValue("textAlign"),u=a.getValue("color"),h=a.getValue("lineHeight"),s=a.getValue("background"),d=a.getValue("padding"),g=a.getValue("borderColor"),c=a.getValue("borderWidth"),f=a.getValue("borderRadius"),v=a.getValue("dash"),p=a.getValue("dashPattern"),_=e.x,y=e.y,D=e.width,V=e.height,b=qe(d),w=re(b,4),m=w[0],E=w[1],T=(w[2],w[3]),k=qe(f),C=re(k,4),I=C[0],O=C[1],x=C[2],A=C[3];s&&(t.fillStyle=s,t.fillRect(_,y,D,V)),c&&(t.strokeStyle=g,t.beginPath(),v&&t.setLineDash(p),ht.Default.drawRoundRect(t,_,y,D,V,I,O,A,x),t.closePath(),t.stroke());var L=T,R=m,P=D-T-E;i.split(/\n/).forEach(function(e){S(t,e,n,u,L,R,P,h,l,"middle"),R+=h})},ninePatchImage:function(e,t,a,o,r){var i=a.getValue("image"),n=a.getValue("top"),l=a.getValue("right"),u=a.getValue("bottom"),h=a.getValue("left"),s=a.getValue("showGuideLine"),d=t.x,g=t.y,c=t.width,f=t.height;e.save(),console.log(ht.Default.getImage(i)),D(e,ht.Default.getImage(i),d,g,c,f,o,r),e.restore(),s&&(e.strokeStyle="red",e.beginPath(),e.moveTo(d,g+n),e.lineTo(d+c,g+n),e.moveTo(d+c-l,g),e.lineTo(d+c-l,g+f),e.moveTo(d,g+f-u),e.lineTo(d+c,g+f-u),e.moveTo(d+h,g),e.lineTo(d+h,g+f),e.stroke())},slider:p,rangeSlider:_},buttonInteractor:new T,inputInteractor:new m,textAreaInteractor:new w,radioInteractor:new k,checkboxInteractor:new C,colorPickerInteractor:new P,dateTimePickerInteractor:new B,comboBoxInteractor:new Re,tableInteractor:new Ne,sliderInteractor:new We,rangeSliderInteractor:new Ue,Color:c,ListView:Ae,ListDropDown:Le,caluMultilineSize:function(e,t){var a=e.a("ht.content"),o=e.a(ue.FONT),r=e.a(ue.LINE_HEIGHT),i=e.a(ue.PADDING),n=qe(i),l=re(n,4),u=l[0],h=l[1],s=l[2],d=l[3],g=a.split(/\n/),c=0;return g.forEach(function(e){var t=$e(o,e);c=Math.max(c,t.width)}),{width:c+d+h,height:g.length*r+u+s}}},Ze=/firefox/.test(window.navigator.userAgent.toLowerCase()),$e=(Fe={},Ye=document?ht.Default.createCanvas().getContext("2d"):null,function(e,t){Ye.font=e||labelFont;var a=Fe[Ye.font];return a||(a=2*Ye.measureText("e").width,Fe[Ye.font]=a),{width:Ye.measureText(t).width+2,height:a}}),qe=function(e,t){if(!e)return Je([],t);var a,o=(a=e,a?("string"!=typeof a&&(a+=""),a.replace(/^\s+|\s+$/g,"")):"").split(/\s+/g),r=[];return o.forEach(function(e){isNaN(e)||r.push(parseInt(e))}),Je(r)},Je=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e&&0!==e.length?3===e.length?[e[0],e[1],e[2],e[1]]:2===e.length?[e[0],e[1],e[0],e[1]]:1===e.length?[e[0],e[0],e[0],e[0]]:[e[0],e[1],e[2],e[3]]:[t,t,t,t]},Qe=function(e){e&&"textarea"===e||(e="input");var t=document.createElement(e),a=t.style;return a.display="block",a.boxSizing="border-box",a.position="absolute",a.outline="none",a.zIndex=1e4,a.borderWidth=0,a.backgroundColor="rgba(0, 0, 0, 0)",t},et=function(e,t,a){var o=t.style,r=a.rect,i=new ht.Math.Matrix2d,n=e.getZoom();ht.Default.layout(t,r),i.appendTranslate(e.tx(),e.ty()),i.appendScale(n,n),i.append(a.matrix),tt(o,"transform","matrix("+i.a.toFixed(5)+", "+i.b.toFixed(5)+", "+i.c.toFixed(5)+",\n    "+i.d.toFixed(5)+", "+i.tx.toFixed(5)+", "+i.ty.toFixed(5)+")"),tt(o,"transformOrigin",(-r.x).toFixed(5)+"px "+(-r.y).toFixed(5)+"px")},tt=((je=document.createElement("input")).setAttribute("style","width: 0;height: 0;"),function(e,t,a){var o=t[0].toUpperCase+t.substring(1,t.length);e["webkit"+o]=a,e["moz"+o]=a,e["ms"+o]=a,e["o"+o]=a,e[t]=a}),at=function(e,t,a){for(var o=[],r=0,i=1,n=e.length;i<=n;i++){var l=e.substring(r,i);$e(a,l).width>t&&(i-1===r?(o.push(e.substring(r,i)),r=i):(o.push(e.substring(r,i-1)),r=i-1))}return r!==i-1&&o.push(e.substring(r,i)),o},ot=function(e,t,a,o){for(var r=[],i=e.split("\n"),n=0,l=i.length;n<l;n++){var u=i[n];if(""===u&&(u=" "),o)Array.prototype.push.apply(r,at(u,a,t));else{for(var h,s,d="",g=void 0,c=void 0,f=void 0,v="",p=0;p<u.length;p++){u.charAt(p).match(/[a-z|A-Z]/g)?d+="1":d+="2"}d=(d=d.replace(/21/g,"2_1")).replace(/12/g,"1_2");for(var _=0;_<d.length;_++){d.charAt(_).match(/\_/g)&&(u=rt(u,_+1,"|"))}h=u.split("|"),s=d.split("_");for(var y=0,D=h.length;y<D;y++)g=v+h[y],c=$e(t,g),"1"===s[y][0]?c.width>a?v?(r.push(v),v="",y--):(f=at(h[y],a,t),Array.prototype.push.apply(r,f.slice(0,f.length-1)),v=f[f.length-1]):c.width===a?(r.push(g),v=""):v=g:c.width>a?(f=at(g,a,t),Array.prototype.push.apply(r,f.slice(0,f.length-1)),v=f[f.length-1]):v=g;v&&r.push(v)}}return r},rt=function(e,t,a){return e=e.substring(0,t-1)+a+e.substring(t-1,e.length)},it=function(e,t,a,o,r,i){return e?(t&&(t=new c(t)),e.a(ue.PRESSED)?o||(r&&t&&0!==t.a?ht.Default.darker(t,ie.activeDarker):i?null:ie.emptyColor):e.a(ue.HOVER)?a||(r&&t&&0!==t.a?ht.Default.darker(t,ie.hoverDarker):i?null:ie.emptyColor):i?null:t?t.getRGBA():ie.emptyColor):t};function nt(e,t){var a=e.prototype,o=ht.Default.getMSMap();for(var r in t)o[r]&&o.hasOwnProperty(r)?o[r](a,t):a[r]=t[r]}function lt(e,t){var a=t.getView().getBoundingClientRect(),o=t.getZoom(),r=t.tx(),i=t.ty(),n=e.getRect();return n.height*=o,n.width*=o,n.x=a.left+r+n.x*o,n.y=a.top+i+n.y*o,n}function ut(e){var t=e.a(ue.VALUE);return void 0===t?"":t}var st,dt,gt=(st=null,dt=function(e,t,a){"binaryString"===a?e.readAsBinaryString(t):"ArrayBuffer"===a?e.readAsArrayBuffer(t):"dataUrl"===a?e.readAsDataURL(t):e.readAsText(t)},function(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=e.multiple,u=e.readType,h=e.filter,t=e.accept;st||((st=document.createElement("input")).setAttribute("type","file"),st.setAttribute("id","hiddenFile"),st.style.width=0,st.style.height=0,st.addEventListener("change",function(e){document.body.removeChild(st),st=null;for(var t=e.target.files,a={files:[]},o=0;o<t.length;o++)h?h(t[o])&&a.files.push(t[o]):a.files.push(t[o]);if(u&&0!==a.files.length)if(l){var r=0;a.files.forEach(function(t){var e=new FileReader;e.onload=function(e){t.readResult=e.target.result,++r===a.files.length&&n(a)},dt(e,t,u)})}else{var i=new FileReader;i.onload=function(e){t[0].readResult=e.target.result,n(a)},dt(i,t[0],u)}else n(a)}),document.body.appendChild(st)),st.multiple=!!l,st.accept=t||"",st.click()}),ct=function(e,t){for(var a=[],o=0,r=0,i=void 0,n=0,l=e.length;n<l;n++)if(i=e[n].width||.1,isNaN(i)){var u=i.split("+"),h=parseFloat(u[0]),s=[];1<h?r+=h:o+=h,s.push(h),1<(h=parseFloat(u[1]))?(r+=h,s.unshift(h)):(o+=h,s.push(h)),a.push(s)}else 1<=(i=parseFloat(i))?r+=i=Math.max(12,i):o+=i,a.push(i);for(n=0,l=a.length;n<l;n++)(i=a[n])<1?a[n]=Math.max(0,i/o*(t-r)):i instanceof Array&&(a[n]=i[0]+Math.max(0,i[1]/o*(t-r)));return a},ft=function(e){var t=re(e,4);return{x:t[0],y:t[1],width:t[2],height:t[3]}},vt=function(e,t){return e&&t?e.getDataUI?e.getDataUI(t):e.getData3dUI?e.getData3dUI(t):void 0:null},pt=function(e,t,a){var o,r=vt(e,t),i=(o=r)&&o.interactiveInfo&&o.interactiveInfo.bodyInfo?o.interactiveInfo.bodyInfo.compInfos:null;if(i)for(var n=0,l=i.length;n<l;n++){var u=i[n];if(u.comp===a)return u}return null},_t=new ze,yt="0.0.1";return Ke.openColorDropDown=A,Ke.openDateTimeDropDown=R,Ke.getFormData=function(e,t){var n={},l=t?t.getChildren():e.dm().getDatas();return l.each(function(e){var t=e.a(ue.FORM_ITEM_NAME),a=e.a(ue.FORM_ITEM_GROUP);if(t)n[t]=ut(e);else if(a&&!n[ue.FORM_ITEM_GROUP])if(e.a(ue.INPUT_TYPE)===y)for(var o=0;o<l.length;o++){var r=l.get(o);if(a===r.a(ue.FORM_ITEM_GROUP)&&r.a(ue.CHECKED)){n[a]=ut(r);break}}else if(e.a(ue.INPUT_TYPE)===b){var i=[];l.each(function(e){a===e.a(ue.FORM_ITEM_GROUP)&&e.a(ue.CHECKED)&&i.push(ut(e))}),n[a]=i}}),n},Ke.selectFile=gt,Ke.getVersion=function(){return yt},Ke});
