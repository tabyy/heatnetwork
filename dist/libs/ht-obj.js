!function($,l,e){"use strict";var o="ht",j=$[o],u=null,P=Math,y=P.abs,O=P.max,L=Number.MAX_VALUE,Y=j.Default,c=Y.getInternal(),g=Y.clone,I=c.vec3TransformMat4,x=c.appendArray,T=function(){var d=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,B=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,w=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,N=function(g,c){return c=parseInt(c),c>=0?g[c-1]:g[c+g.length]},n=function(D,H,y,M,Z,h){if(D.vs){var V=N(H,M),l=N(H,Z),f=N(H,h),F=y.matrix,P=D.vs;if(y.flipFace){var W=l;l=f,f=W}F?(x(P,I(g(V),F)),x(P,I(g(l),F)),x(P,I(g(f),F))):(x(P,V),x(P,l),x(P,f))}},K=function(z,t,f,p,n,D){if(z.vs){var K=N(t,p),B=N(t,n),O=N(t,D),S=f.flipY;if(f.flipFace){var k=B;B=O,O=k}z.uv.push(K[0],S?1-K[1]:K[1],B[0],S?1-B[1]:B[1],O[0],S?1-O[1]:O[1])}},k=function(h,$,z,P,O,Z){if(h.vs){var M=N($,P),J=N($,O),T=N($,Z),t=z.normalMatrix,A=h.ns;if(z.flipFace){var C=J;J=T,T=C}t?(x(A,I(g(M),t)),x(A,I(g(J),t)),x(A,I(g(T),t))):(x(A,M),x(A,J),x(A,T))}},i=function(q,$,L,f,r,z,T,M){var B=f&&f.length&&M;z[3]===e?(n(q,$,r,z[0],z[1],z[2]),T&&K(q,L,r,T[0],T[1],T[2]),B&&k(q,f,r,M[0],M[1],M[2])):(n(q,$,r,z[0],z[1],z[3]),n(q,$,r,z[1],z[2],z[3]),T&&(K(q,L,r,T[0],T[1],T[3]),K(q,L,r,T[1],T[2],T[3])),B&&(k(q,f,r,M[0],M[1],M[3]),k(q,f,r,M[1],M[2],M[3])))},W=function(H,w,n,I){var f,p,h,e,X,D,v,u=L,r=L,b=L,K=-L,Q=-L,s=-L;for(f in H)for(D=H[f].vs,v=D.length,p=0;v>p;p+=3)h=D[p+0],e=D[p+1],X=D[p+2],u>h&&(u=h),r>e&&(r=e),b>X&&(b=X),h>K&&(K=h),e>Q&&(Q=e),X>s&&(s=X);if(n){var V=u+(K-u)/2,T=r+(Q-r)/2,J=b+(s-b)/2;for(f in H)for(D=H[f].vs,v=D.length,p=0;v>p;p+=3)D[p+0]-=V,D[p+1]-=T,D[p+2]-=J}var j,F,B;n?(j=K-u,F=Q-r,B=s-b):(j=2*O(y(u),y(K)),F=2*O(y(r),y(Q)),B=2*O(y(b),y(s))),I.rawS3=[j,F,B];for(f in H){if(D=H[f].vs,w)for(v=D.length,p=0;v>p;p+=3)j&&(D[p+0]/=j),F&&(D[p+1]/=F),B&&(D[p+2]/=B);H[f].rawS3=I.rawS3}};return function(j,Q,g){if(!j)return u;(c.isString(Q)||Q instanceof ArrayBuffer)&&(Q=r(Q)),g||(g={}),g.flipY==u&&(g.flipY=!0),(g.s3||g.r3||g.t3||g.mat)&&(g.matrix=c.createWorldMatrix(g.mat,g.s3,g.r3,g.rotationMode,g.t3));var P,K,N,k,q,L,S=[],I=[],s=g.ignoreNormal?u:[],D=g.reverseFlipMtls,M={vs:[],uv:[],ns:s?[]:u},o={htdefault:M},x=new E(j);for(s&&g.matrix&&(g.normalMatrix=c.createNormalMatrix(g.matrix));null!=(K=x.stepNext());)if(K=K.trim(),0!==K.length&&"#"!==K.charAt(0))if(N=d.exec(K))S.push([parseFloat(N[1]),parseFloat(N[2]),parseFloat(N[3])]);else if(N=B.exec(K))I.push([parseFloat(N[1]),parseFloat(N[2])]);else if(s&&(N=w.exec(K)))g.flipFace?s.push([parseFloat(-N[1]),parseFloat(-N[2]),parseFloat(-N[3])]):s.push([parseFloat(N[1]),parseFloat(N[2]),parseFloat(N[3])]);else if("f"===K[0]){var z=K.split(/\s+/);if(z.length<4)continue;var X,P,a,U=[],f=[],C=[];for(P=1,a=z.length;a>P;P++)X=z[P].split("/"),U.push(parseInt(X[0],10)),X.length>1&&X[1].length>0&&C.push(parseInt(X[1],10)),X.length>2&&X[2].length>0&&f.push(parseInt(X[2],10));for(P=0,a=U.length-2;a>P;P++)i(M,S,I,s,g,[U[0],U[P+1],U[P+2]],C.length?[C[0],C[P+1],C[P+2]]:u,f.length?[f[0],f[P+1],f[P+2]]:u)}else if(/^usemtl /.test(K)&&(k=K.substring(7).trim(),!(M=o[k]))){if(M={name:k,vs:[],uv:[],ns:s?[]:u},g.ignoreMtls&&g.ignoreMtls.indexOf(k)>=0&&delete M.vs,(g.reverseFlip||"*"===D||D&&D.indexOf(k)>=0)&&(M.reverseFlip=!0),Q&&(q=Q[k],q&&(g.ignoreColor||(M.color=q.kd),!g.ignoreTransparent&&q.d>0&&q.d<1&&(M.transparent=!0,M.opacity=q.d),!g.ignoreImage&&(L=q.map_kd)))){L=L.split(" ");var m=-1;for(P=0;P<L.length;P++)"-o"===L[P]?(M.uvOffset=[parseFloat(L[P+1]),parseFloat(L[P+2])],P+=2,m=P):"-s"===L[P]&&(M.uvScale=[parseFloat(L[P+1]),parseFloat(L[P+2])],P+=2,m=P);M.image=(g.prefix||"")+L.splice(m+1).join(" ")}o[k]=M}var _=[];for(var t in o){var e=o[t].vs;e&&0!==e.length||_.push(t)}_.forEach(function(g){delete o[g]}),W(o,g.cube,g.center,g);var p=g.shape3d;if(p){var n=[];for(var k in o){var M=o[k];n.rawS3=M.rawS3,n.push(M)}Y.setShape3dModel(p,n)}return o}}(),r=function(M){var g={};if(M)for(var q,J,B,i,t,O,Z=new E(M),Y=/\s+/;null!=(J=Z.stepNext());)J=J.trim(),0!==J.length&&"#"!==J.charAt(0)&&(B=J.indexOf(" "),i=(B?J.substring(0,B):J).toLowerCase(),t=(B?J.substring(B+1):"").trim(),"newmtl"===i?g[t]=q={name:t}:q&&("ka"===i||"kd"===i||"ks"===i?(O=t.split(Y,3),q[i]=[parseFloat(O[0]),parseFloat(O[1]),parseFloat(O[2]),1]):q[i]="ns"===i||"d"===i?parseFloat(t):t));return g},E=function(H){var D=this;if(H instanceof ArrayBuffer){D.isBuffer=!0;var e=0,o=new Uint8Array(H),b=o.length,j=o.length;D.stepNext=function(){for(var d,S,W=e;b>e;)if(d=o[e],S=d>>4,12===S||13==S)e+=2;else if(14===S)e+=3;else if(e++,10===d)return String.fromCharCode.apply(null,o.subarray(W,e));return e>W?String.fromCharCode.apply(null,o.subarray(W,e)):null}}else{D.isBuffer=!1;var l=H.split("\n"),J=0,j=l.length;D.stepNext=function(){return j>J?l[J++]:null}}};E.prototype={},E.prototype.constructor=E,c.addMethod(Y,{loadObj:function(_,l,s){s=s||{};var H=!1;/(MSIE |Trident\/|Edge\/)/.test($.navigator.userAgent)&&(H=!0);var M=function(U){var e,o=s.finishFunc,N=s.shape3d,V=U?T(U[0],U[1],s):null;if(V){if(N)e=Y.getShape3dModel(N);else{e=[];for(var O in V){var I=V[O];e.rawS3=I.rawS3,e.push(I)}}o&&o(V,e,e.rawS3)}else o&&o(null)};if(H){var Q=function(x){s.responseType="arraybuffer",Y.xhrLoad(_,function(T){M([T,x])},s)};l?Y.xhrLoad(l,function(c){Q(c)},s):Q()}else Y.xhrLoad(l?[_,l]:[_],M,s)},parseObj:function(S,A,j){return T(S,A,j)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);