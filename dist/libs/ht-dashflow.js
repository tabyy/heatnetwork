!function(i){"use strict";var G="ht",J=i[G],s=J.Default,D=Math,o=(D.PI,D.sin,D.cos,D.atan2,D.sqrt,D.max),P=D.floor,F=(D.round,D.ceil),W=J.Shape,p=(J.Edge,J.List),O=J.Style,H=J.graph,e=s.getInternal(),U=e.ui(),f=null,X="prototype",k=i.clearInterval,L=i.setInterval,B=function(k){var Y=k.data,L=this.dm();if(Y&&"add"===k.kind){var G=L.$1c,v=Y instanceof W?"shape.":"edge.";G&&Y.s(v+"dash.flow")&&G.indexOf(Y)<0&&G.push(Y)}"clear"===k.kind&&(L.$1c=[])},A=function(d){var J=d.property,Q=d.data,D=d.newValue,V=this.dm().$1c,m=Q instanceof W?"s:shape.dash.flow":"s:edge.dash.flow";if(V&&J===m)if(D)V.indexOf(Q)<0&&V.push(Q);else for(var z=V.length,u=0;z>u;u++)if(V[u]===Q){V.splice(u,1);break}},n=H.GraphView[X],E=U.EdgeUI[X],$=U.ShapeUI[X],u=$._80o,y=E._80o,R=J.DataModel[X],_=R.prepareRemove,m=n.setDataModel;O["edge.dash.flow.step"]==f&&(O["edge.dash.flow.step"]=3),O["shape.dash.flow.step"]==f&&(O["shape.dash.flow.step"]=3),R.prepareRemove=function(S){_.call(this,S);var i=S._dataModel,B=i.$1c;if(B)for(var T=B.length,f=0;T>f;f++)if(B[f]===S){B.splice(f,1);break}},n.setDataModel=function(o){var L=this,R=L._dataModel;if(R!==o){R&&(R.umm(B,L),R.umd(A,L),R.$1c=[]),o.mm(B,L),o.md(A,L);var N=o.$1c=[];o.each(function(J){var b=J instanceof W?"shape.":"edge.";J.s(b+"dash.flow")&&N.indexOf(J)<0&&N.push(J)}),m.call(L,o)}},n.setDashFlowInterval=function(x){var B=this,h=B.$2c;B.$2c=x,B.fp("dashFlowInterval",h,x),B.$3c!=f&&(k(B.$3c),delete B.$3c,B.enableDashFlow(x))},n.getDashFlowInterval=function(){return this.$2c},n.$4c=function(){var q,C,A,E=this,x=E.tx(),G=E.ty(),B=E._zoom,b=E.getWidth(),r=E.getHeight(),v={x:-x/B,y:-G/B,width:b/B,height:r/B},t=E.dm().$1c,f=E._56I,N=new p;if(t.forEach(function(R){f[R.getId()]&&(q=E.getDataUI(R),q&&(A=q._79o(),A&&N.add(A)))}),0!==N.size()&&(N.each(function(g){s.intersectsRect(v,g)&&(C=s.unionRect(C,g))}),C&&(C&&(s.grow(C,o(1,1/B)),C.x=P(C.x*B)/B,C.y=P(C.y*B)/B,C.width=F(C.width*B)/B,C.height=F(C.height*B)/B,C=s.intersection(v,C)),C))){var d=E._canvas.getContext("2d");d.save(),d.lineCap=s.lineCap,d.lineJoin=s.lineJoin,e.translateAndScale(d,x,G,B),d.beginPath(),d.rect(C.x,C.y,C.width,C.height),d.clip(),d.clearRect(C.x,C.y,C.width,C.height),E.$5c(d,C),d.restore()}},n.$5c=function(o,V){var y,z,b=this;b._93db(o),b.each(function(A){b._56I[A._id]&&(y=b.getDataUI(A),y&&(z=y._79o(),(!V||s.intersectsRect(V,z))&&(y.$7c=!0,y._42(o),delete y.$7c)))}),b._92db(o)},n.enableDashFlow=function(W){var s=this;s.$3c==f&&(s.$3c=L(function(){s.$4c()},W||s.$2c||50))},n.disableDashFlow=function(){var N=this;k(N.$3c),delete N.$3c};var c=function(){var x=this,c=x._data,D=c instanceof W?"shape.":"edge.",f=c.s(D+"dash.pattern"),K=c.s(D+"dash.flow.reverse");if(f&&c.s(D+"dash")&&c.s(D+"dash.flow")&&x.$7c){var E=x.s(D+"dash.offset")||0,e=c.s(D+"dash.flow.step"),U=c.getStyleMap(),$=0;f.forEach(function(T){$+=T}),K&&(e=-e),E-=e,E%=$,U||(c._styleMap=U={}),U[D+"dash.offset"]=E}};E._80o=function(S){y.call(this,S),c.call(this)},$._80o=function(P){u.call(this,P),c.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);