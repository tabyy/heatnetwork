!function(v){"use strict";var O="ht",K=v[O],s=Math,d=s.max,Y=s.min,e=s.abs,R=s.atan2,M=(s.cos,s.sin,s.ceil),X=K.Default,i=X.getInternal(),t=K.List,G=i.Mat,l=i.getNodeRect,E=i.intersectionLineRect,p=X.getDistance,q=X.setEdgeType,S="left",W="right",N="top",k="bottom",D="edge.type",C="edge.gap",z="edge.center",o="edge.extend",V=function(j,Y){return l(j,Y).width},U=function(s,I){return l(s,I).height},g=function(j,u){return i.getEdgeAgentPosition(j,u._40I,u.s("edge.source.position"),u.s("edge.source.offset.x"),u.s("edge.source.offset.y"),u.s("edge.source.anchor.x"),u.s("edge.source.anchor.y"))},A=function(K,b){return i.getEdgeAgentPosition(K,b._41I,b.s("edge.target.position"),b.s("edge.target.offset.x"),b.s("edge.target.offset.y"),b.s("edge.target.anchor.x"),b.s("edge.target.anchor.y"))},b=function(Z,H){var a=Z.s(D),P=Z.getEdgeGroup();if(P){var F=0;if(P.eachSiblingEdge(function(Q){H.isVisible(Q)&&Q.s(D)==a&&F++}),F>1)return Z.s(C)*(F-1)/2}return 0},c=function(z,X){var q=z.s(D),o=z.isLooped();if(!z.getEdgeGroup())return o?z.s(C):0;var T,Q=0,l=0,O=0;return z.getEdgeGroup().getSiblings().each(function(c){c.each(function(v){if(v._40I===z._40I&&v.s(D)==q&&X.isVisible(v)){var w=v.s(C);T?(l+=O/2+w/2,O=w):(T=v,O=w),v===z&&(Q=l)}})}),o?l-Q+O:Q-l/2},B=function(p,T){var f=T.s("edge.corner.radius");return X.toRoundedCorner(p,f)};i.addMethod(K.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),q("boundary",function(H,k,z,U){U||(k=-k);var L,J=g(z,H),f=A(z,H),o=l(z,H._40I),m=l(z,H._41I),K=new G(R(f.y-J.y,f.x-J.x)),v=p(J,f),s=J.x,j=J.y;return L=K.tf(0,k),J={x:L.x+s,y:L.y+j},L=K.tf(v,k),f={x:L.x+s,y:L.y+j},L=E(J,f,o),L&&(J={x:L[0],y:L[1]}),L=E(J,f,m),L&&(f={x:L[0],y:L[1]}),{points:new t([J,f])}}),q("ripple",function(K,T,f,J){J||(T=-T);var m=g(f,K),n=A(f,K),X=p(m,n),C=Y(K.s("edge.offset"),X/2),L=K.s("edge.ripple.size"),F=K.s("edge.ripple.length"),b=K.s("edge.ripple.both"),V=K.s(z),c=K.s("edge.ripple.elevation"),x=new t,W=K.s("edge.ripple.straight")?null:new t,$=new G(R(n.y-m.y,n.x-m.x));J||(c=-c),X-=2*C,F>0&&(L=M(X/F));var w=X/L;W&&W.add(1);for(var Q=0;L>Q;Q++)W&&W.add(3),0===Q?x.add({x:C+w*Q,y:V?0:T}):x.add({x:C+w*Q,y:T}),x.add({x:C+w*Q+w/2,y:c+T}),b&&(c=-c);for(x.add({x:C+X,y:V?0:T}),Q=0;Q<x.size();Q++){var N=$.tf(x.get(Q));N.x+=m.x,N.y+=m.y,x.set(Q,N)}return{points:x,segments:W}}),q("h.v",function(E,R,h){R=c(E,h);var W=new t,F=E.s(z),n=g(h,E),_=n.x,j=n.y,K=A(h,E),L=K.x,Y=K.y,u=0,b=0,H=L-_,G=Y-j;return F||(u=V(h,E._40I)/2,b=U(h,E._41I)/2),H>=0&&0>=G?(W.add({x:_+u,y:j+R}),W.add({x:L+R,y:j+R}),W.add({x:L+R,y:Y+b})):0>=H&&G>=0?(W.add({x:_-u,y:j+R}),W.add({x:L+R,y:j+R}),W.add({x:L+R,y:Y-b})):H>=0&&G>=0?(W.add({x:_+u,y:j+R}),W.add({x:L-R,y:j+R}),W.add({x:L-R,y:Y-b})):(W.add({x:_-u,y:j+R}),W.add({x:L-R,y:j+R}),W.add({x:L-R,y:Y+b})),B(W,E)}),q("v.h",function(I,L,k){L=c(I,k);var T=new t,F=I.s(z),Y=g(k,I),Q=Y.x,W=Y.y,M=A(k,I),R=M.x,C=M.y,e=0,O=0,N=R-Q,u=C-W;return F||(e=V(k,I._41I)/2,O=U(k,I._40I)/2),N>=0&&0>=u?(T.add({x:Q+L,y:W-O}),T.add({x:Q+L,y:C+L}),T.add({x:R-e,y:C+L})):0>=N&&u>=0?(T.add({x:Q+L,y:W+O}),T.add({x:Q+L,y:C+L}),T.add({x:R+e,y:C+L})):N>=0&&u>=0?(T.add({x:Q-L,y:W+O}),T.add({x:Q-L,y:C+L}),T.add({x:R-e,y:C+L})):(T.add({x:Q-L,y:W-O}),T.add({x:Q-L,y:C+L}),T.add({x:R+e,y:C+L})),B(T,I)}),q("ortho",function(R,v,N){var s=new t,P=R.s(z),X=R.s("edge.ortho"),y=R._40I,Z=R._41I,k=g(N,R),M=k.x,q=k.y,O=A(N,R),T=O.x,c=O.y,o=T-M,H=c-q,m=P?0:V(N,y)/2,l=P?0:U(N,y)/2,i=P?0:V(N,Z)/2,$=P?0:U(N,Z)/2,n=(o-(m+i)*(o>0?1:-1))*X,Y=(H-(l+$)*(H>0?1:-1))*X;return e(o)<e(H)?o>=0&&0>=H?(s.add({x:M+v,y:q-l}),s.add({x:M+v,y:q+Y+v-l}),s.add({x:T+v,y:q+Y+v-l}),s.add({x:T+v,y:c+$})):0>=o&&H>=0?(s.add({x:M+v,y:q+l}),s.add({x:M+v,y:q+Y+v+l}),s.add({x:T+v,y:q+Y+v+l}),s.add({x:T+v,y:c-$})):o>=0&&H>=0?(s.add({x:M+v,y:q+l}),s.add({x:M+v,y:q+Y-v+l}),s.add({x:T+v,y:q+Y-v+l}),s.add({x:T+v,y:c-$})):(s.add({x:M+v,y:q-l}),s.add({x:M+v,y:q+Y-v-l}),s.add({x:T+v,y:q+Y-v-l}),s.add({x:T+v,y:c+$})):o>=0&&0>=H?(s.add({x:M+m,y:q+v}),s.add({x:M+n+v+m,y:q+v}),s.add({x:M+n+v+m,y:c+v}),s.add({x:T-i,y:c+v})):0>=o&&H>=0?(s.add({x:M-m,y:q+v}),s.add({x:M+n+v-m,y:q+v}),s.add({x:M+n+v-m,y:c+v}),s.add({x:T+i,y:c+v})):o>=0&&H>=0?(s.add({x:M+m,y:q+v}),s.add({x:M+n-v+m,y:q+v}),s.add({x:M+n-v+m,y:c+v}),s.add({x:T-i,y:c+v})):(s.add({x:M-m,y:q+v}),s.add({x:M+n-v-m,y:q+v}),s.add({x:M+n-v-m,y:c+v}),s.add({x:T+i,y:c+v})),B(s,R)}),q("flex",function(X,q,G){var L=new t,I=X.s("edge.flex")+b(X,G),d=X.s(z),r=X._40I,y=X._41I,K=g(G,X),J=K.x,v=K.y,x=A(G,X),O=x.x,c=x.y,i=O-J,H=c-v,f=d?0:V(G,r)/2,Q=d?0:U(G,r)/2,$=d?0:V(G,y)/2,p=d?0:U(G,y)/2,m=i>0?I:-I,s=H>0?I:-I;return e(i)<e(H)?i>=0&&0>=H?(L.add({x:J+q,y:v-Q}),L.add({x:J+q,y:v+s+q-Q}),L.add({x:O+q,y:c-s+q+p}),L.add({x:O+q,y:c+p})):0>=i&&H>=0?(L.add({x:J+q,y:v+Q}),L.add({x:J+q,y:v+s+q+Q}),L.add({x:O+q,y:c-s+q-p}),L.add({x:O+q,y:c-p})):i>=0&&H>=0?(L.add({x:J+q,y:v+Q}),L.add({x:J+q,y:v+s-q+Q}),L.add({x:O+q,y:c-s-q-p}),L.add({x:O+q,y:c-p})):(L.add({x:J+q,y:v-Q}),L.add({x:J+q,y:v+s-q-Q}),L.add({x:O+q,y:c-s-q+p}),L.add({x:O+q,y:c+p})):i>=0&&0>=H?(L.add({x:J+f,y:v+q}),L.add({x:J+m+q+f,y:v+q}),L.add({x:O-m+q-$,y:c+q}),L.add({x:O-$,y:c+q})):0>=i&&H>=0?(L.add({x:J-f,y:v+q}),L.add({x:J+m+q-f,y:v+q}),L.add({x:O-m+q+$,y:c+q}),L.add({x:O+$,y:c+q})):i>=0&&H>=0?(L.add({x:J+f,y:v+q}),L.add({x:J+m-q+f,y:v+q}),L.add({x:O-m-q-$,y:c+q}),L.add({x:O-$,y:c+q})):(L.add({x:J-f,y:v+q}),L.add({x:J+m-q-f,y:v+q}),L.add({x:O-m-q+$,y:c+q}),L.add({x:O+$,y:c+q})),B(L,X)}),q("extend.east",function(a,Z,N){var W=new t,e=a.s(o)+b(a,N),D=a.s(z),w=g(N,a),c=w.x+(D?0:V(N,a._40I)/2),j=w.y,S=A(N,a),Q=S.x+(D?0:V(N,a._41I)/2),k=S.y,p=d(c,Q)+e;return j>k?(W.add({x:c,y:j+Z}),W.add({x:p+Z,y:j+Z}),W.add({x:p+Z,y:k-Z}),W.add({x:Q,y:k-Z})):(W.add({x:c,y:j-Z}),W.add({x:p+Z,y:j-Z}),W.add({x:p+Z,y:k+Z}),W.add({x:Q,y:k+Z})),B(W,a)}),q("extend.west",function(p,E,U){var K=new t,Z=p.s(o)+b(p,U),J=p.s(z),F=g(U,p),W=F.x-(J?0:V(U,p._40I)/2),a=F.y,R=A(U,p),G=R.x-(J?0:V(U,p._41I)/2),D=R.y,n=Y(W,G)-Z;return a>D?(K.add({x:W,y:a+E}),K.add({x:n-E,y:a+E}),K.add({x:n-E,y:D-E}),K.add({x:G,y:D-E})):(K.add({x:W,y:a-E}),K.add({x:n-E,y:a-E}),K.add({x:n-E,y:D+E}),K.add({x:G,y:D+E})),B(K,p)}),q("extend.north",function(x,W,S){var i=new t,F=x.s(o)+b(x,S),f=x.s(z),X=g(S,x),D=X.x,J=X.y-(f?0:U(S,x._40I)/2),n=A(S,x),P=n.x,I=n.y-(f?0:U(S,x._41I)/2),h=Y(J,I)-F;return D>P?(i.add({y:J,x:D+W}),i.add({y:h-W,x:D+W}),i.add({y:h-W,x:P-W}),i.add({y:I,x:P-W})):(i.add({y:J,x:D-W}),i.add({y:h-W,x:D-W}),i.add({y:h-W,x:P+W}),i.add({y:I,x:P+W})),B(i,x)}),q("extend.south",function(D,x,X){var H=new t,$=D.s(o)+b(D,X),N=D.s(z),R=g(X,D),h=R.x,j=R.y+(N?0:U(X,D._40I)/2),Z=A(X,D),L=Z.x,w=Z.y+(N?0:U(X,D._41I)/2),n=d(j,w)+$;return h>L?(H.add({y:j,x:h+x}),H.add({y:n+x,x:h+x}),H.add({y:n+x,x:L-x}),H.add({y:w,x:L-x})):(H.add({y:j,x:h-x}),H.add({y:n+x,x:h-x}),H.add({y:n+x,x:L+x}),H.add({y:w,x:L+x})),B(H,D)});var n=function(G,Z,m,A,k){if(A.sort(function(C,i){var g=C.getSourceAgent()===Z?C.getTargetAgent():C.getSourceAgent(),$=i.getSourceAgent()===Z?i.getTargetAgent():i.getSourceAgent(),E=g.p(),V=$.p();if(m===S||m===W){if(E.y>V.y)return 1;if(E.y<V.y)return-1}else{if(E.x>V.x)return 1;if(E.x<V.x)return-1}return X.sortFunc(C.getId(),i.getId())}),k){for(var d,a,L,D=G.getSourceAgent(),s=G.getTargetAgent(),f=0;f<A.size();f++){var q=A.get(f);q.getSourceAgent()===D&&q.getTargetAgent()===s||q.getTargetAgent()===D&&q.getSourceAgent()===s?(a||(a=new t),a.add(q,0)):a?(L||(L=new t),L.add(q)):(d||(d=new t),d.add(q))}A.clear(),d&&A.addAll(d),a&&A.addAll(a),L&&A.addAll(L)}var z=A.indexOf(G),Y=A.size(),v=G.s(C);return{side:m,index:z,size:Y,offset:-v*(Y-1)/2+v*z}},L=function(t,u,e,X,s){var C=u.s(D);return n(u,e,X,e.getAgentEdges().toList(function(k){return t.isVisible(k)&&k.s(D)===C}),s)},r=function(T,E){var Z=T.getSourceAgent()===E?T.getTargetAgent():T.getSourceAgent(),i=E.p(),R=Z.p(),y=R.x-i.x,H=R.y-i.y;return y>0&&e(H)<=y?W:0>y&&e(H)<=-y?S:H>0&&e(y)<=H?k:N},j=function(Q,L,z){var y=L.s(D),X=r(L,z);return n(L,z,X,z.getAgentEdges().toList(function(p){return Q.isVisible(p)&&p.s(D)===y&&r(p,z)===X}))},x=function(Y,j){var y=Y.getSourceAgent()===j,u=y?Y.getTargetAgent():Y.getSourceAgent(),U=j.p(),h=u.p();return y?U.y>h.y?N:k:U.x<h.x?W:S},H=function(v,P,_){var f=P.s(D),M=x(P,_);return n(P,_,M,_.getAgentEdges().toList(function(R){return v.isVisible(R)&&R.s(D)===f&&x(R,_)===M}),M===W||M===k)},P=function(M,X){var j=M.getSourceAgent()===X,O=j?M.getTargetAgent():M.getSourceAgent(),D=X.p(),x=O.p();return j?D.x<x.x?W:S:D.y>x.y?N:k},y=function($,G,R){var H=G.s(D),f=P(G,R);return n(G,R,f,R.getAgentEdges().toList(function(p){return $.isVisible(p)&&p.s(D)===H&&P(p,R)===f}),f===W||f===k)},Q=function(D,P,L){var h=D.getSourceAgent(),E=D.getTargetAgent(),Y=h.getId()>E.getId(),A=Y?E:h,$=Y?h:E,a=A.p(),r=$.p(),l=L(P,D,A),I=L(P,D,$),g=D.s(z),R=g?0:V(P,A)/2,J=g?0:V(P,$)/2,q=g?0:U(P,A)/2,e=g?0:U(P,$)/2,u=l.offset,Q=I.offset,w=l.side,O=I.side,p=new t;return w===N?(p.add({x:a.x+u,y:a.y-q}),p.add({x:a.x+u,y:r.y+Q}),O===S?p.add({x:r.x-J,y:r.y+Q}):p.add({x:r.x+J,y:r.y+Q})):w===k?(p.add({x:a.x+u,y:a.y+q}),p.add({x:a.x+u,y:r.y+Q}),O===S?p.add({x:r.x-J,y:r.y+Q}):p.add({x:r.x+J,y:r.y+Q})):w===S?(p.add({x:a.x-R,y:a.y+u}),p.add({x:r.x+Q,y:a.y+u}),O===k?p.add({x:r.x+Q,y:r.y+e}):p.add({x:r.x+Q,y:r.y-e})):w===W&&(p.add({x:a.x+R,y:a.y+u}),p.add({x:r.x+Q,y:a.y+u}),O===k?p.add({x:r.x+Q,y:r.y+e}):p.add({x:r.x+Q,y:r.y-e})),Y&&p.reverse(),B(p,D)};q("ortho2",function(L,u,p){var I,v,h=L.s(z),T=L.s("edge.ortho"),A=L.getSourceAgent(),E=L.getTargetAgent(),q=A.getId()>E.getId(),_=q?E:A,P=q?A:E,D=_.p(),o=P.p(),K=j(p,L,_),s=j(p,L,P),J=h?0:V(p,_)/2,G=h?0:U(p,_)/2,Q=h?0:V(p,P)/2,y=h?0:U(p,P)/2,C=new t,Y=K.offset,n=s.offset,r=K.side;return r===W?(I=o.y>D.y?-Y:Y,v=D.x+J+(o.x-Q-D.x-J)*T,C.add({x:D.x+J,y:D.y+Y}),C.add({x:v+I,y:D.y+Y}),C.add({x:v+I,y:o.y+n}),C.add({x:o.x-Q,y:o.y+n})):r===S?(I=o.y>D.y?-Y:Y,v=D.x-J-(D.x-J-o.x-Q)*T,C.add({x:D.x-J,y:D.y+Y}),C.add({x:v-I,y:D.y+Y}),C.add({x:v-I,y:o.y+n}),C.add({x:o.x+Q,y:o.y+n})):r===k?(I=o.x>D.x?-Y:Y,v=D.y+G+(o.y-y-D.y-G)*T,C.add({x:D.x+Y,y:D.y+G}),C.add({x:D.x+Y,y:v+I}),C.add({x:o.x+n,y:v+I}),C.add({x:o.x+n,y:o.y-y})):r===N&&(I=o.x>D.x?-Y:Y,v=D.y-G-(D.y-G-o.y-y)*T,C.add({x:D.x+Y,y:D.y-G}),C.add({x:D.x+Y,y:v-I}),C.add({x:o.x+n,y:v-I}),C.add({x:o.x+n,y:o.y+y})),q&&C.reverse(),B(C,L)},!0),q("flex2",function(a,y,l){var Q,b=a.getSourceAgent(),p=a.getTargetAgent(),_=b.getId()>p.getId(),s=_?p:b,i=_?b:p,H=s.p(),F=i.p(),x=j(l,a,s),J=j(l,a,i),m=a.s(z),D=a.s("edge.flex")+(x.size-1)/2*a.s(C),d=m?0:V(l,s)/2,O=m?0:U(l,s)/2,w=m?0:V(l,i)/2,n=m?0:U(l,i)/2,A=new t,f=x.offset,v=J.offset,I=x.side;return I===W?(Q=F.y>H.y?-f:f,A.add({x:H.x+d,y:H.y+f}),A.add({x:H.x+d+D+Q,y:H.y+f}),A.add({x:F.x-w-D+Q,y:F.y+v}),A.add({x:F.x-w,y:F.y+v})):I===S?(Q=F.y>H.y?-f:f,A.add({x:H.x-d,y:H.y+f}),A.add({x:H.x-d-D-Q,y:H.y+f}),A.add({x:F.x+w+D-Q,y:F.y+v}),A.add({x:F.x+w,y:F.y+v})):I===k?(Q=F.x>H.x?-f:f,A.add({x:H.x+f,y:H.y+O}),A.add({x:H.x+f,y:H.y+O+D+Q}),A.add({x:F.x+v,y:F.y-n-D+Q}),A.add({x:F.x+v,y:F.y-n})):I===N&&(Q=F.x>H.x?-f:f,A.add({x:H.x+f,y:H.y-O}),A.add({x:H.x+f,y:H.y-O-D-Q}),A.add({x:F.x+v,y:F.y+n+D-Q}),A.add({x:F.x+v,y:F.y+n})),_&&A.reverse(),B(A,a)},!0),q("extend.north2",function(S,u,i){var I=S.getSourceAgent(),V=S.getTargetAgent(),T=I.getId()>V.getId(),w=T?V:I,Z=T?I:V,_=w.p(),j=Z.p(),F=L(i,S,w,N),y=L(i,S,Z,N,!0),s=S.s(z),g=s?0:U(i,w)/2,J=s?0:U(i,Z)/2,d=F.offset,H=y.offset,X=S.s(o)+(F.size-1)/2*S.s(C),v=Y(_.y-g,j.y-J)-X+(_.x<j.x?d:-d),n=new t;return n.add({x:_.x+d,y:_.y-g}),n.add({x:_.x+d,y:v}),n.add({x:j.x+H,y:v}),n.add({x:j.x+H,y:j.y-J}),T&&n.reverse(),B(n,S)},!0),q("extend.south2",function(M,J,y){var S=M.getSourceAgent(),i=M.getTargetAgent(),s=S.getId()>i.getId(),N=s?i:S,Q=s?S:i,W=N.p(),b=Q.p(),D=L(y,M,N,k),h=L(y,M,Q,k,!0),v=M.s(z),A=v?0:U(y,N)/2,X=v?0:U(y,Q)/2,V=D.offset,H=h.offset,R=M.s(o)+(D.size-1)/2*M.s(C),f=d(W.y+A,b.y+X)+R+(W.x>b.x?V:-V),T=new t;return T.add({x:W.x+V,y:W.y+A}),T.add({x:W.x+V,y:f}),T.add({x:b.x+H,y:f}),T.add({x:b.x+H,y:b.y+X}),s&&T.reverse(),B(T,M)},!0),q("extend.west2",function(I,q,a){var b=I.getSourceAgent(),X=I.getTargetAgent(),d=b.getId()>X.getId(),l=d?X:b,g=d?b:X,w=l.p(),$=g.p(),e=L(a,I,l,N),D=L(a,I,g,N,!0),O=I.s(z),m=O?0:V(a,l)/2,j=O?0:V(a,g)/2,v=e.offset,T=D.offset,G=I.s(o)+(e.size-1)/2*I.s(C),s=Y(w.x-m,$.x-j)-G+(w.y<$.y?v:-v),x=new t;return x.add({x:w.x-m,y:w.y+v}),x.add({x:s,y:w.y+v}),x.add({x:s,y:$.y+T}),x.add({x:$.x-j,y:$.y+T}),d&&x.reverse(),B(x,I)},!0),q("extend.east2",function(i,D,R){var x=i.getSourceAgent(),E=i.getTargetAgent(),r=x.getId()>E.getId(),X=r?E:x,c=r?x:E,b=X.p(),j=c.p(),q=L(R,i,X,N),J=L(R,i,c,N,!0),U=i.s(z),l=U?0:V(R,X)/2,y=U?0:V(R,c)/2,_=q.offset,F=J.offset,S=i.s(o)+(q.size-1)/2*i.s(C),w=d(b.x+l,j.x+y)+S+(b.y>j.y?_:-_),H=new t;return H.add({x:b.x+l,y:b.y+_}),H.add({x:w,y:b.y+_}),H.add({x:w,y:j.y+F}),H.add({x:j.x+y,y:j.y+F}),r&&H.reverse(),B(H,i)},!0),q("v.h2",function(F,n,$){return Q(F,$,H)},!0),q("h.v2",function(Z,L,M){return Q(Z,M,y)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);