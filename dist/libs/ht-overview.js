!function(X,k){"use strict";var H="ht",P=H+".graph.",U=X[H],n=U.graph,i=U.Default,E=U.Color,g=null,R="px",q=i.getInternal(),d=q.getPinchDist,t=i.preventDefault,f=i.getTouchCount,x=i.startDragging;q.addMethod(i,{overviewBackground:E.widgetBackground,overviewMaskBackground:E.transparent,overviewContentBorderColor:E.widgetBorder,overviewContentBackground:E.background},!0),n.Overview=function(P){var w=this,L=w._view=q.createView(1,w);w._canvas=q.createCanvas(L),L.style.background=i.overviewBackground,L.appendChild(w._mask=q.createDiv()),w.setGraphView(P),w.addListeners()},i.def(P+"Overview",k,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:i.overviewMaskBackground,_contentBorderColor:i.overviewContentBorderColor,_contentBackground:i.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(b){var A=this;if(A.gv!==b){var z=A.gv;A.gv=b,z&&(z.removeViewListener(A.handleGraphViewChanged,A),z.ump(A.handleGraphViewPropertyChanged,A)),b&&(b.addViewListener(A.handleGraphViewChanged,A),b.mp(A.handleGraphViewPropertyChanged,A)),A.fp("graphView",z,b),A.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(m){this._autoUpdate&&"validate"===m.kind&&this.redraw()},handleGraphViewPropertyChanged:function(u){("canvasBackground"===u.property||this.getFixToRect()&&("zoom"===u.property||"translateX"===u.property||"translateY"===u.property))&&this.redraw()},redraw:function(){var Y=this;Y._redraw||(Y._redraw=1,Y.iv(50))},validateImpl:function(){var h=this,E=h.gv,T=h._canvas,c=h.getWidth(),D=h.getHeight(),M=h._redraw;if(E){var U=h._mask,u=U.style,z=E.getViewRect(),m=this.getFixToRect(),I=m?"boolean"==typeof m?E.getContentRect():m:E.getScrollRect(),p=I.x,v=I.y,J=I.width,O=I.height,K=h._rate=Math.max(J/c,O/D),C=h._x=(c-J/K)/2,t=h._y=(D-O/K)/2;if(0!==z.width&&0!==z.height||h.hasRetry||(i.callLater(h.iv,h,g),h.hasRetry=!0),(c!==T.clientWidth||D!==T.clientHeight)&&(q.setCanvas(T,c,D),M=1),q.isSameRect(I,h._scrollRect)||(h._scrollRect=I,M=1),M){var X=q.initContext(T),S=E.getDataModel().getBackground()||h._contentBackground,j=h._contentBorderColor,H=i.devicePixelRatio;X.clearRect(0,0,c*H,D*H),S&&q.fillRect(X,C*H,t*H,J/K*H,O/K*H,S),q.translateAndScale(X,-p/K+C,-v/K+t,1/K),E._42(X),X.restore(),j&&q.drawBorder(X,j,C*H,t*H,J/K*H,O/K*H)}u.background=h._maskBackground,u.left=C+(z.x-p)/K+R,u.top=t+(z.y-v)/K+R,u.width=z.width/K+R,u.height=z.height/K+R,h._redraw=null}else if(M){var X=q.initContext(T);X.clearRect(0,0,c,D),X.restore(),h._redraw=null}},center:function(z){var G=this,D=G.gv;if(D){var S=D._zoom,r=D._29I,s=G._rate,_=G._scrollRect,W=i.getLogicalPoint(z,G._canvas),E=_.x+(W.x-G._x)*s,e=_.y+(W.y-G._y)*s;D.setTranslate((r.width/2-E)*S,(r.height/2-e)*S)}},handle_mousedown:function($){this.handle_touchstart($)},handleWindowMouseUp:function(s){this.handleWindowTouchEnd(s)},handleWindowMouseMove:function(z){this.handleWindowTouchMove(z)},handle_mousewheel:function(r){this.handleScroll(r,r.wheelDelta)},handle_DOMMouseScroll:function(A){2===A.axis&&this.handleScroll(A,-A.detail)},handleScroll:function(s,A){if(t(s),this.gv){var d=this.gv;A>0?d.scrollZoomIn():0>A&&d.scrollZoomOut()}},handle_touchstart:function(o){if(t(o),this.gv&&i.isLeftButton(o)){var e=this,D=e.gv,S=f(o);1===S?i.isDoubleClick(o)&&D.isResettable()?D.reset():(e.center(o),x(e,o)):2===S&&(e._dist=d(o),x(e,o))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(N){if(this.gv){var G=this,E=G._dist,A=f(N);1===A?G.center(N):2===A&&E!=g&&G.gv.handlePinch(g,d(N),E)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);