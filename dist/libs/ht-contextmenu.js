!function(D,N){"use strict";var M="ht",J=D[M],U="position",r="absolute",x="px",I="left",j="top",$="innerHTML",o="className",p="width",A="height",Y="0",C="display",u="none",i="visibility",g="user-select",q="margin",Z="padding",y=null,X=J.Color,h=J.Default,T=h.getInternal(),W=D.setTimeout,_=D.setInterval,S=D.clearTimeout,E=D.clearInterval,k=D.parseInt,m=h.isLeftButton,z=h.isDragging,f=h.startDragging,K=h.getDistance,s=h.isTouchable,G=X.widgetIconHighlight,B=X.widgetIconBorder,l=X.widgetIconGradient,L=function(){return document},P=function(t,U){return t.querySelectorAll(U)},v=function(g){var N=L().createElement(g);return"ul"===g&&(t(N,U,"relative"),t(N,q,Y),t(N,Z,Y),t(N,"list-style",u),t(N,"box-sizing","border-box"),t(N,"-moz-box-sizing","border-box"),t(N,C,"inline-block"),t(N,"vertical-align","text-bottom"),t(N,"border","1px solid "+h.contextMenuBorderColor),t(N,"box-shadow","0 0 16px 1px "+h.contextMenuShadowColor),t(N,"overflow","hidden"),h.contextMenuBorderRadius&&t(N,"border-radius",h.contextMenuBorderRadius+x)),N},d=function(p){var H=p.touches[0];return H?H:p.changedTouches[0]},F=function(){return v("div")},n=function(){return v("canvas")},t=function(M,E,x){M.style.setProperty(E,x,y)},e=function(V,g,A){h.def(J.widget[V],g,A)},a=function(D,s){D.appendChild(s)},R=function(H,O){H.removeChild(O)},c=h.eventListenerOptionsFalse,b=(h.eventListenerOptionsTrue,function(L,l,z,P){L.addEventListener(l,z,P?c:c)}),H=function(p,E,M,G){p.removeEventListener(E,M,G?c:c)};T.addMethod(h,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:B},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:G}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:B},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:G,gradient:h.imageGradient,gradientColor:l,background:G}]},contextMenuLabelFont:(s?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var O=function(l){var o=this,K=l._view;if(o.$11b=l,o.addListeners(),b(K,"contextmenu",function(G){G.preventDefault()}),!s){var S=o.$37b=o.$36b.bind(o);b(K,"mouseover",S),b(K,"mouseout",S)}};h.def(O,N,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(b){if(h.preventDefault(b),m(b)){for(var L=this,U=L.$11b,k=L.getView(),N=k.children,u=0;u<N.length;u++){var P=N[u],S=P.$24b,X=P.$25b;if(S&&S.contains(b.target))return U.scrollUp(P),L.$28b=W(function(){L.$29b=_(function(){U.scrollUp(P)},100)},500),f(L,b),void 0;if(X&&X.contains(b.target))return U.scrollDown(P),L.$28b=W(function(){L.$29b=_(function(){U.scrollDown(P)},100)},500),f(L,b),void 0}s&&(b=d(b)),L.$30b={x:b.pageX,y:b.pageY}}},handle_mousedown:function(X){this.handle_touchstart(X)},handle_touchend:function(g){if(m(g)){var o=this,i=o.$30b,l=s?{x:d(g).pageX,y:d(g).pageY}:{x:g.pageX,y:g.pageY};if(!i||K(i,l)>1)return delete o.$30b,void 0;for(var X=o.getView(),r=o.$11b,Z=g.target,f=y,L=y,S=r._items,A=X.$26b,w=0;w<A.length;w++)if(L=A[w],L.contains(Z)){f=L.getAttribute("data-id");break}if(f&&S){var M=r.$17b(S,function(p){return p._id===f});if(M){var J=!1;M.disabled instanceof Function?J=M.disabled.call(r,M):M.disabled===!0&&(J=!0),J||(M.items?s&&o.$36b(L,!0):r.$1b(M,g))}}delete o.$30b}},$36b:function(r,X){if(!z()){var M,e=this,l=e.$11b,f=e.getView(),P=l.$20b||f.children[0],F=l.$19b,g=f.$26b,$=f.children,y=r.target,V=f.getBoundingClientRect(),s=h.getWindowInfo(),N=s.width,A=s.height,n=function(v){for(var V=0;V<$.length;V++){var a=$[V],N=new RegExp(v+"$"),w=a[o];if(w&&(N.test(w)||w.indexOf(v+" ")>=0))return a}},m=function(d){for(var y=0;y<g.length;y++){var i=g[y],r=new RegExp(d+"$"),M=i[o];if(M&&(r.test(M)||M.indexOf(d+" ")>=0))return i}},R=function(p){var b=m("menu-item"+p.$45b),l=b.getBoundingClientRect(),S=l.top-V.top,O=l.left-V.left;t(p,j,S+x),t(p,I,O+l.width+x);var K=p.getBoundingClientRect(),J=K.top,Z=K.left,e=K.height,d=K.width,H=J+e+2,F=Z+d+2;H>A&&t(p,j,S+A-H+x),F>N&&t(p,I,O-d+x)};if(X)M=r;else{if("mouseover"===r.type){for(var U=0;U<g.length;U++){var J=g[U];if(J.contains(y)){M=J;break}}if(!M&&F){var p=F.parentNode,S=n("submenu"+F.getAttribute("data-id"));(S&&S.contains(y)||p&&p.contains(y))&&(M=F)}}else if("mouseout"===r.type){for(var E=!1,G=r.relatedTarget,U=0;U<$.length;U++){var v=$[U];if("hidden"!==v.style.visibility&&v.contains(G)){E=!0;break}}if(E)return}!M&&P&&(M=m("menu-item"+(P.$45b||"NaN")))}if(M!=F){if(F)for(var u=F;u;){if(u[o]=u[o].replace(" menu-item-hover",""),u[o].indexOf("disabled")<0){var W=l.getItemByProperty("_id",u.getAttribute("data-id"));null!=W.background?W.background instanceof Function?t(u,"background-color",W.background.call(l,W)):t(u,"background-color",W.background):t(u,"background-color",h.contextMenuBackground),t(u,"color",h.contextMenuLabelColor)}var L=n("submenu"+u.getAttribute("data-id"));L&&t(L,i,"hidden");var C=u.parentNode;u=m("menu-item"+(C.$45b||"NaN"))}if(M){for(var Y=M,c=[];Y;){Y[o]+=" menu-item-hover",Y[o].indexOf("disabled")<0&&(t(Y,"background-color",h.contextMenuHoverBackground),t(Y,"color",h.contextMenuHoverLabelColor));var B=n("submenu"+Y.getAttribute("data-id"));B&&(t(B,i,"visible"),c.push(B));var C=Y.parentNode;Y=m("menu-item"+(C.$45b||"NaN"))}c.reverse(),c.forEach(function(t){R(t)})}}l.$19b=M,l.$20b=M?M.parentNode:f.children[0]}},handle_mouseup:function(L){this.handle_touchend(L)},handleWindowTouchEnd:function(){var R=this;R.$28b!=y&&(S(R.$28b),delete R.$28b),R.$29b!=y&&(E(R.$29b),delete R.$29b),delete R.$34b,delete R.$30b,delete R.$35b},handleWindowMouseUp:function(f){this.handleWindowTouchEnd(f)},handle_mousemove:function(d){this.handle_touchmove(d)},handle_touchmove:function(G){if(!z()&&m(G)){for(var O=this,H=O.getView().children,S=y,W=0;W<H.length;W++){var g=H[W];if(g.contains(G.target)){S=g;break}}var M=O.$30b,Y=s?{x:d(G).pageX,y:d(G).pageY}:{x:G.pageX,y:G.pageY};S&&M&&K(M,Y)>2&&(f(O,G),O.$34b=S,O.$35b=S.$18b)}},handleWindowTouchMove:function(l){l.preventDefault();var t=this,u=t.$11b,H=t.$34b,k=t.$35b,C=t.$30b;if(C&&H){var c=s?{x:d(l).pageX,y:d(l).pageY}:{x:l.pageX,y:l.pageY},e=c.y-C.y;e>0?u.scrollUp(H,H.$18b-(k-e)):u.scrollDown(H,k-e-H.$18b)}},handleWindowMouseMove:function(w){this.handleWindowTouchMove(w)},$10b:function(G,l){G.preventDefault();for(var F=this,z=F.getView().children,A=y,R=0;R<z.length;R++){var s=z[R];if(s.contains(G.target)){A=s;break}}if(A){var t=this.$11b,f=t.getRowHeight();Math.abs(l)>.05&&(l>0?t.scrollUp(A,l*f):0>l&&t.scrollDown(A,-l*f))}},handle_mousewheel:function(t){this.$10b(t,t.wheelDelta/40)},handle_DOMMouseScroll:function(F){this.$10b(F,-F.detail)},$44b:function(g){this.getView().contains(g.target)||this.$11b.hide()},$41b:function(D){this.$11b.show(D)},$4b:function(N,e){var i=this.$11b;if(e=e||i._items,e&&e.length&&N.keyCode){var d=[N.keyCode];N.shiftKey&&d.push(16),N.ctrlKey&&d.push(17),N.altKey&&d.push(18),/mac/.test(D.navigator?D.navigator.userAgent.toLowerCase():"")?N.metaKey&&d.push(17):N.metaKey&&d.push(91),d.sort();var L=d.join(),$=i.$17b(e,function(f){if(f.key){var m=f.key.slice(0);return m.sort(),L===m.join()}});if($){$.preventDefault!==!1&&N.preventDefault();var F=!1;$.disabled instanceof Function?F=$.disabled.call(i,$):$.disabled===!0&&(F=!0),F||i.$1b($,N)}}},$39b:function(c){var H=this,W=d(c);H.$32b={x:W.pageX,y:W.pageY}},$38b:function(T){var R=this,H=d(T);R.$31b={x:H.pageX,y:H.pageY},R.$33b=W(function(){R.$31b&&(R.$32b?K(R.$31b,R.$32b)<10&&R.$11b.show(T):R.$11b.show(T)),delete R.$33b,delete R.$31b,delete R.$32b},600)},$40b:function(){var m=this;m.$33b!=y&&(S(m.$33b),delete m.$33b,delete m.$31b,delete m.$32b)}}),J.widget.ContextMenu=function($){var P=this,S=P._view=T.createView(null,P);S[o]="ht-widget-contextmenu",P.setItems($),P.$13b=new O(P),t(S,"font",h.contextMenuLabelFont),t(S,U,r),t(S,"cursor","default"),t(S,"-webkit-"+g,u),t(S,"-moz-"+g,u),t(S,"-ms-"+g,u),t(S,g,u),t(S,"box-sizing","border-box"),t(S,"-moz-box-sizing","border-box"),h.baseZIndex!=y&&t(S,"z-index",k(h.baseZIndex)+2+""),P.$3b=function(D){P.$13b.$4b(D)}},e("ContextMenu",N,{$5b:0,_items:y,$21b:y,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var r=this,M=r._enableGlobalKey;M===!1&&(b(L(),"keydown",r.$3b),r._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,H(L(),"keydown",this.$3b)},setItems:function(s){this._items=s},getItems:function(){return this._items},setVisibleFunc:function(b){this.$16b=b},setLabelMaxWidth:function(_){this.$43b=_},$1b:function(b,A){var d=this;if("check"===b.type)b.selected=!b.selected;else if("radio"===b.type){var x=b.groupId;d.$17b(d._items,function(d){d.groupId===x&&(d.selected=!1)}),b.selected=!0}if(d.hide(),b.action)b.action.apply(b.scope||d,[b,A]);else if(b.href){var R=b.linkTarget||"_self";D.open(b.href,R)}},getItemById:function(b){return this.getItemByProperty("id",b)},setItemVisible:function(_,x){var X=this.getItemById(_);X&&(X.visible=x)},getItemByProperty:function(R,P,A){var F=this;if(A=A||F._items,!A||0===A.length)return y;var u=F.$17b(A,function(j){return j[R]===P});return u||y},scrollUp:function(V,X){var g=this;if(X=X==y?20:X,X=k(X),0!==X){var O=0;V.$18b>X&&(O=V.$18b-X),g.$42b(V,O),V.scrollTop=O,V.$18b=O}},scrollDown:function(K,x){var I=this;if(x=x==y?20:x,x=k(x),0!==x){var p=K.$22b,_=K.$23b,m=p-_;_+K.$18b+x<p&&(m=K.$18b+x),I.$42b(K,m),K.scrollTop=m,K.$18b=m}},$42b:function(q,P){P=P==y?q.$18b:P;var j=q.$24b,R=q.$25b;j&&(t(j,"top",P+x),0==P?t(j,C,u):t(j,C,"block")),R&&(t(R,"bottom",-P+x),P==q.$22b-q.$23b?t(R,C,u):t(R,C,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(b,O){for(var l=0;l<b.length;l++){var C=b[l];if(O(C))return C;if(C.items){var i=this.$17b(C.items,O);if(i)return i}}},$2b:function(s,T){for(var L=this,G=0;G<s.length;G++){L.$5b++;var S=s[G];if(S.visible!==!1&&!(h.isFunction(S.visible)&&S.visible()===!1||L.$16b&&!L.$16b.call(L,S))){var j=v("li"),P=L.$5b+"";if(t(j,"white-space","nowrap"),t(j,C,"block"),"separator"===S||S.separator===!0){var Y=F();Y[o]="separator",t(Y,A,h.contextMenuSeparatorWidth+x),t(Y,"background",h.contextMenuSeparatorColor),a(j,Y)}else{S._id=P,j.setAttribute("data-id",P);var m=v("span"),R=v("span"),k=n(),z=F();if(t(m,C,"inline-block"),t(m,A,"1.2em"),t(R,C,"inline-block"),t(R,A,"1.2em"),t(R,"line-height","1.2em"),k[o]="prefix",t(k,C,"inline-block"),t(k,p,"1em"),t(k,A,"1em"),t(k,"vertical-align","middle"),t(k,q,"0 0.2em"),"check"===S.type&&S.selected?k[o]+=" check-prefix":"radio"===S.type&&S.selected&&(k[o]+=" radio-prefix"),a(j,k),S.icon){var d=n();d[o]="contextmenu-item-icon",t(d,C,"inline-block"),t(d,A,"1.2em"),t(d,p,"1.2em"),t(d,"margin-right","0.2em"),t(d,"float","left"),d.$50b=S.icon,d._item=S,a(m,d)}if(R[$]=S.label,a(m,R),a(j,m),z[o]="suffix",t(z,C,"inline-block"),t(z,"margin-left","1em"),t(z,"margin-right","0.4em"),t(z,"text-align","right"),t(z,"font-size","75%"),S.items&&(z[$]=h.contextMenuSubmenuMark),S.suffix&&(z[$]=S.suffix),a(j,z),j[o]="menu-item menu-item"+P,null!=S.background?S.background instanceof Function?t(j,"background-color",S.background.call(L,S)):t(j,"background-color",S.background):t(j,"background-color",h.contextMenuBackground),t(j,"color",h.contextMenuLabelColor),t(j,Z,"3px 0"),S.disabled instanceof Function){var N=S.disabled.call(L,S);N&&(j[o]+=" disabled",t(j,"color",h.contextMenuDisabledLabelColor))}else S.disabled&&(j[o]+=" disabled",t(j,"color",h.contextMenuDisabledLabelColor));if(S.items){L.$21b||(L.$21b=new J.List);var V=v("ul");V[o]="submenu"+P,V.$45b=P,t(V,i,"hidden"),t(V,U,r),a(L._view,V),L.$21b.add(V),L.$2b(S.items,V)}}a(T,j)}}},rebuild:function(){var o=this,s=o._items,g=o._view;if(g&&(g[$]="",o.$21b=y,o.$5b=0,o.$19b=y,o.$20b=y,g.$26b=y,s&&0!==s.length)){var W=v("ul",o._r);a(g,W),o.$2b(s,W)}},addTo:function($){if($){var U=this,Q=U.$13b;if(U.$12b=$,U.$9b=function(k){Q.$44b(k)},U.$27b=function(z){Q.$41b(z)},s){var W=U.$6b=function(d){Q.$38b(d)},C=U.$7b=function(S){Q.$39b(S)},z=U.$8b=function(I){Q.$40b(I)};b($,"touchstart",W,!0),b($,"touchmove",C),b($,"touchend",z)}else b($,"contextmenu",U.$27b)}},showOnView:function(q,l,P){q=q.getView?q.getView():q;var r=h.getWindowInfo(),K=q.getBoundingClientRect();this.show(K.left+r.left+l,K.top+r.top+P)},show:function(T,X,M){var J=this,M=M==y?!0:!1,Q=J._view;if(Q){if(J.invalidate(),1===arguments.length){var z=T;if(s){var W=d(z);T=W.pageX,X=W.pageY}else T=z.pageX,X=z.pageY}var i=h.getWindowInfo(),O=i.width,q=i.height,m=i.left,_=i.top,K={pageX:T,pageY:X,clientX:T-m,clientY:X-_,target:1,originEvent:z},l=K.clientX,f=K.clientY,N=function(z){z.style.height=q-6+x;var R=F(),b=F(),n=function(E){t(E,U,r),t(E,"text-align","center"),t(E,p,"100%"),t(E,"font-size",10+x),t(E,"padding","2px 0"),t(E,"border","0px solid "+h.contextMenuScrollerBorderColor),t(E,"background-color",h.contextMenuScrollerColor1),E.style.backgroundImage="-webkit-linear-gradient(top, "+h.contextMenuScrollerColor1+", "+h.contextMenuScrollerColor2+")",E.style.backgroundImage="linear-gradient(to bottom, "+h.contextMenuScrollerColor1+", "+h.contextMenuScrollerColor2+")"};R[o]="menu-arrow-item menu-arrow-item-top",b[o]="menu-arrow-item menu-arrow-item-bottom",n(R),t(R,"top",Y),t(R,"left",Y),t(R,"border-bottom-width",1+x),R[$]="▲",n(b),t(b,"bottom",Y),t(b,"left",Y),t(b,"border-top-width",1+x),b[$]="▼",z.$24b=R,z.$25b=b,z.$18b=z.scrollTop,z.$22b=z.scrollHeight,z.$23b=z.clientHeight,a(z,R),a(z,b),J.$42b(z)};J.beforeShow&&J.beforeShow(K);var v=J._items;if(v&&(z&&z.preventDefault(),v.length)){J.rebuild(),h.appendToScreen(Q),Q.$26b=P(Q,".menu-item");var V=Q.children[0];V.offsetHeight>q&&N(V);var H=f+(M?1:0),B=l+(M?1:0),e=function(E){for(var H=0,j=0,D=0,g=J.$43b;D<E.children.length;D++){var h=E.children[D];if(h.getAttribute("data-id")){var i=h.children[1],X=h.children[2],z=i.children;if(g){var b=z[0];z.length>1&&(b=z[1]),b.offsetWidth>g&&(b[$]="<marquee scrollamount='3'>"+b[$]+"</marquee>",b.children[0].style.verticalAlign="text-bottom",t(b,p,g+x),t(b,C,"inline-block"))}var r=i.offsetWidth,m=X.offsetWidth;r>H&&(H=r),m>j&&(j=m)}}for(D=0;D<E.children.length;D++){var h=E.children[D];if(h.getAttribute("data-id")){var i=h.children[1],X=h.children[2],P=i.children[0],w=i.children[1];!w&&P.style.width&&t(P,p,H+x),t(i,p,H+x),t(X,p,j+x)}}};e(V);var k=f+3+Q.offsetHeight,c=l+3+Q.offsetWidth;k>q?t(Q,j,H-(k-q)+_+x):t(Q,j,H+_+x),c>O?t(Q,I,B-(c-O)+m+x):t(Q,I,B+m+x);var Z=J.$21b;Z&&Z.each(function($){e($),$.offsetHeight>q&&N($)}),J.$9b&&b(L(),s?"touchstart":"mousedown",J.$9b,!0),J.afterShow&&J.afterShow(K),J.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=y:!1},getRelatedView:function(){return this.$12b},hide:function(){var m=this,g=m._view;g&&g.parentNode&&(R(g.parentNode,g),H(L(),s?"touchstart":"mousedown",m.$9b,!0),m.afterHide&&m.afterHide())},dispose:function(){var _=this,x=_.$12b,a=_._view;a&&(a.parentNode&&R(a.parentNode,a),_.disableGlobalKey(),x&&(s?(H(x,"touchstart",_.$6b,!0),H(x,"touchmove",_.$7b),H(x,"touchend",_.$8b)):H(x,"contextmenu",_.$27b)),_._view=_._items=_.$21b=_.$19b=_.$12b=_.beforeShow=_.afterShow=_.afterHide=_.$9b=_.$3b=_.$6b=_.$7b=_.$8b=_.$27b=y)},$46b:function(Y,m,D,M,Q){var n=T.initContext(Y);T.translateAndScale(n,0,0,1),n.clearRect(0,0,D,M),h.drawStretchImage(n,h.getImage(m),"fill",0,0,D,M,Q,this),n.restore()},$47b:function(){var H,M,d,k=this,Y=k._view;if(k.isShowing()){var D=P(Y,".check-prefix");for(d=0;d<D.length;d++){var p=D[d];H=p.clientWidth,M=p.clientHeight,p.$48b=H,p.$49b=M,T.setCanvas(p,H,M)}var x=P(Y,".radio-prefix");for(d=0;d<x.length;d++){var t=x[d];H=t.clientWidth,M=t.clientHeight,t.$48b=H,t.$49b=M,T.setCanvas(t,H,M)}var y=P(Y,".contextmenu-item-icon");for(d=0;d<y.length;d++){var K=y[d];H=K.clientWidth,M=K.clientHeight,K.$48b=H,K.$49b=M,T.setCanvas(K,H,M)}}},validateImpl:function(){var t,J,s,Q=this,T=Q._view;if(Q.isShowing()){var R=P(T,".check-prefix");for(s=0;s<R.length;s++){var O=R[s];t=O.$48b,J=O.$49b,t&&J&&Q.$46b(O,h.contextMenuCheckIcon,t,J)}var n=P(T,".radio-prefix");for(s=0;s<n.length;s++){var Y=n[s];t=Y.$48b,J=Y.$49b,t&&J&&Q.$46b(Y,h.contextMenuRadioIcon,t,J)}var w=P(T,".contextmenu-item-icon");for(s=0;s<w.length;s++){var r=w[s];t=r.$48b,J=r.$49b,t&&J&&Q.$46b(r,h.getImage(r.$50b),t,J,r._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);