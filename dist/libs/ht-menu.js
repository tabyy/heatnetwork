!function(U,D){"use strict";var R="ht",P=U[R],H="innerHTML",b="className",h=null,c="px",S=P.Default,j=S.getInternal(),W="0",L=function(){return document},a=function(m){return L().createElement(m)},f=function(){return a("canvas")},G=function(d,Q,g){d.style.setProperty(Q,g,h)},v=function(u,N,R){S.def(P.widget[u],N,R)},A=function(e,M){e.appendChild(M)},w=function(F,C){F.removeChild(C)},e=S.eventListenerOptionsFalse,r=(S.eventListenerOptionsTrue,function(P,Q,i,z){P.addEventListener(Q,i,z?e:e)}),Q=function(L,c,V,g){L.removeEventListener(c,V,g?e:e)},Y=S.isTouchable;j.addMethod(S,{menuLabelFont:(Y?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),P.widget.Menu=function(x){var D=this,h=D._view=j.createView(null,D),Z=D.$1g=new P.widget.ContextMenu,B=a("ul");Z._r=!0,Z._view[b]+=" ht-widget-dropdownmenu",h[b]="ht-widget-menu",B[b]="header",G(h,"margin",W),G(h,"padding",W),G(h,"background",S.menuBackground),G(h,"-webkit-user-select","none"),G(h,"-moz-user-select","none"),G(h,"user-select","none"),G(h,"text-align","left"),G(h,"border-bottom",S.menuSeparatorWidth+"px solid "+S.menuSeparatorColor),G(h,"cursor","default"),G(h,"overflow","auto"),G(h,"white-space","nowrap"),G(h,"font",S.menuLabelFont),G(h,"color",S.menuLabelColor),G(h,"box-sizing","border-box"),G(h,"-moz-box-sizing","border-box"),G(B,"list-style","none"),G(B,"margin",W),G(B,"padding",W),G(B,"display","inline-block"),A(h,B),D.setItems(x),D.$2g=function(j){D.$3g(j)},D.$4g=function(m){D.$5g(m)},D.$6g=function(y){D.$7g(y)},D.$8g=function(F){D.$9g(F)},D.$9b=function(K){D.$10g(K)},D._autoShow=!0,D.setAutoShow(!1),Z.afterHide=function(){D.$11g()},Z.afterShow=function(){D.$12g()},Q(L(),"keydown",Z.$3b),D.$3b=function(B){D.$13g(B)},D.invalidate()},v("Menu",D,{_items:h,$14g:S.menuHoverBackground,$15g:S.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(w){var s=this;if(s.$21g=w,s.setItems(s._items),"largeicons"===w){for(var M=s._view.querySelectorAll(".header-item"),k=0,P=0;P<M.length;P++){var U=M[P];k=Math.max(k,U.clientWidth)}for(var P=0;P<M.length;P++){var U=M[P];G(U,"min-width",k+c)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(Y){this.$22g=Y;for(var A=this._view.querySelectorAll(".header-item"),S=0;S<A.length;S++){var u=A[S];G(u,"margin-left",Y+c),G(u,"margin-right",Y+c)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(e){this.$23g=e;for(var o=this._view.querySelectorAll(".header-item"),R=0;R<o.length;R++){var O=o[R];G(O,"margin-top",e+c),G(O,"margin-bottom",e+c)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(n){this.$24g=n,G(this._view,"text-align",n)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var t=this,Q=t._enableGlobalKey;Q===!1&&(r(L(),"keydown",t.$3b),t._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,Q(L(),"keydown",this.$3b)},setHoverBackground:function(L){this.$14g=L},setHoverColor:function(d){this.$15g=d},setItems:function(S){var s=this,Z=s._view,o=s.$21g;if(s._items=S,Z.children[0][H]="",s.$16g={},S&&S.length){for(var Q=Z.children[0],E=0,V=L().createDocumentFragment();E<S.length;E++){var y=S[E],J=a("li"),k=a("span");if(y.icon){var $=f();$[b]="menu-item-icon","smallicons"===o?(G($,"height","1.2em"),G($,"width","1.2em"),G($,"vertical-align","middle")):(G($,"height","32px"),G($,"width","32px"),G($,"display","block"),G($,"margin","0 auto")),$.$20g=y.icon,A(J,$)}J[b]="header-item",G(J,"display","inline-block"),G(J,"vertical-align","top"),G(J,"padding","0 1.2em"),G(J,"line-height","1.8em"),"largeicons"===o&&G(J,"text-align","center"),G(J,"background-color","rgba(0,0,0,0)"),J.setAttribute("data-index",E),s.$16g[E]=y.items,k[H]=y.label,"iconsonly"!==o&&A(J,k),A(V,J)}A(Q,V)}},showDropdownMenu:function(z){var E=this,l=E.$16g[z],Q=E.$1g,c=E._view.children[0].children[z],U=E.$17g;if(c&&c!==U){U&&E.hideDropdownMenu();var o=c.getBoundingClientRect(),a=S.getWindowInfo();E.$17g=c,Q.setItems(l),Q.show(o.left+a.left,o.top+o.height+a.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(H,V){var X=this,w=X._items;return w&&0!==w.length?X.$1g.getItemByProperty(H,V,w):h},$12g:function(){var Z=this,p=Z.$17g;p.style.background=Z.$14g,p.style.color=Z.$15g,Z._autoShow||r(L(),Y?"touchstart":"mousedown",Z.$9b)},$11g:function(){var b=this,E=b.$17g;E&&(E.style.background="",E.style.color="",b.$17g=h),Q(L(),Y?"touchstart":"mousedown",b.$9b)},$10g:function(D){var r=this,I=r._view,W=r.$1g,o=I.children[0];!L().body.contains(I)||o.contains(D.target)||W._view.contains(D.target)||r.hideDropdownMenu()},$13g:function(Q){var y=this,q=y.$1g;L().body.contains(y._view)&&q.$13b.$4b.call(q.$13b,Q,y._items)},setAutoShow:function(P){var G=this,O=G.$1g,f=G._view;G._autoShow!==P&&(G._autoShow?(Q(f,"mouseover",G.$2g),Q(f,"mouseout",G.$4g),Q(O._view,"mouseout",G.$4g),Y||(r(f,"mouseover",G.$8g),r(f,"mouseout",G.$8g)),r(f,Y?"touchstart":"mousedown",G.$6g)):(Q(f,"mouseover",G.$8g),Q(f,"mouseout",G.$8g),Q(f,Y?"touchstart":"mousedown",G.$6g),Q(L(),Y?"touchstart":"mousedown",G.$9b),Y||(r(f,"mouseover",G.$2g),r(f,"mouseout",G.$4g),r(O._view,"mouseout",G.$4g))),G._autoShow=P)},$3g:function(c){var $=this,v=$._view.children[0],H=c.target;if(v!==H&&v.contains(H)){for(;"header-item"!==H[b];)H=H.parentNode;$.showDropdownMenu(H.getAttribute("data-index"))}},$5g:function(q){var T=this,N=T._view.children[0],b=T.$1g,F=q.target,d=q.relatedTarget;!N.contains(F)&&!b._view.contains(F)||N.contains(d)||b._view.contains(d)||T.hideDropdownMenu()},$7g:function(s){s.preventDefault();var Q=this,E=Q._view.children[0],y=Q.$1g,r=s.target;if(S.isLeftButton(s)&&E!==r&&E.contains(r))if(Y){for(;"header-item"!==r[b];)r=r.parentNode;var V=r.getAttribute("data-index"),y=Q.$1g,o=Q._view.children[0].children[V],q=Q.$17g;y.isShowing()&&Q.hideDropdownMenu(),o!==q&&Q.showDropdownMenu(V)}else if(y.isShowing())Q.hideDropdownMenu();else{for(;"header-item"!==r[b];)r=r.parentNode;Q.showDropdownMenu(r.getAttribute("data-index"))}},$9g:function(A){var T=this,Y=T._view,H=T.$1g,w=A.target;if(Y.contains(w)){for(var b=Y.querySelectorAll(".header-item"),Q=h,e=0;e<b.length;e++){var _=b[e];_.style.background="",_.style.color="","mouseover"===A.type?_.contains(w)&&(Q=_):"mouseout"===A.type&&H.isShowing()&&T.$17g===_&&(Q=_)}H.isShowing()&&(Q||(Q=T.$17g),T.showDropdownMenu(Q.getAttribute("data-index"))),Q&&(Q.style.background=T.$14g,Q.style.color=T.$15g)}},getShowingMenuIndex:function(){var s=this.$17g;return s?s.getAttribute("data-index"):-1},addTo:function(K){var i=this,X=i._view;A(K,X),i.invalidate()},dispose:function(){var b=this,s=b._view,K=b.$1g;s&&(b._autoShow?(Q(s,"mouseover",b.$2g),Q(s,"mouseout",b.$4g),Q(K._view,"mouseout",b.$4g)):(Q(s,"mouseover",b.$8g),Q(s,"mouseout",b.$8g),Q(s,Y?"touchstart":"mousedown",b.$6g),Q(L(),Y?"touchstart":"mousedown",b.$9b)),Q(L(),"keydown",b.$3b),K.dispose(),s.parentNode&&w(s.parentNode,s),b._view=b.$1g=b.$16g=b._items=b.$17g=b.$2g=b.$4g=b.$6g=b.$8g=b.$9b=b.$3b=h)},$19g:function(k,T,n,I){var p=j.initContext(k);j.translateAndScale(p,0,0,1),p.clearRect(0,0,n,I),S.drawStretchImage(p,S.getImage(T),"fill",0,0,n,I),p.restore()},validateImpl:function(){var H,t,x,h=this,N=h._view,F=N.querySelectorAll(".menu-item-icon");for(x=0;x<F.length;x++){var v=F[x];H=v.clientWidth,t=v.clientHeight,H&&t&&(j.setCanvas(v,H,t),h.$19g(v,S.getImage(v.$20g),H,t))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);